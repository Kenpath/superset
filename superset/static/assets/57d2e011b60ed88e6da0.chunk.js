/*! For license information please see 57d2e011b60ed88e6da0.chunk.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{1685:function(t,e,i){var s;!function(o,n,a){if(o){for(var r,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},h={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},p={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},d=1;d<20;++d)l[111+d]="f"+d;for(d=0;d<=9;++d)l[d+96]=d.toString();y.prototype.bind=function(t,e,i){return t=t instanceof Array?t:[t],this._bindMultiple.call(this,t,e,i),this},y.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},y.prototype.trigger=function(t,e){return this._directMap[t+":"+e]&&this._directMap[t+":"+e]({},t),this},y.prototype.reset=function(){return this._callbacks={},this._directMap={},this},y.prototype.stopCallback=function(t,e){return!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&(!function t(e,i){return null!==e&&e!==n&&(e===i||t(e.parentNode,i))}(e,this.target)&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable))},y.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},y.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(l[e]=t[e]);r=null},y.init=function(){var t=y(n);for(var e in t)"_"!==e.charAt(0)&&(y[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},y.init(),o.Mousetrap=y,t.exports&&(t.exports=y),void 0===(s=function(){return y}.call(e,i,e,t))||(t.exports=s)}function u(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)}function f(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return l[t.which]?l[t.which]:h[t.which]?h[t.which]:String.fromCharCode(t.which).toLowerCase()}function m(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function g(t,e,i){return i||(i=function(){if(!r)for(var t in r={},l)t>95&&t<112||l.hasOwnProperty(t)&&(r[l[t]]=t);return r}()[t]?"keydown":"keypress"),"keypress"==i&&e.length&&(i="keydown"),i}function v(t,e){var i,s,o,n=[];for(i=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),o=0;o<i.length;++o)s=i[o],p[s]&&(s=p[s]),e&&"keypress"!=e&&c[s]&&(s=c[s],n.push("shift")),m(s)&&n.push(s);return{key:s,modifiers:n,action:e=g(s,n,e)}}function y(t){var e=this;if(t=t||n,!(e instanceof y))return new y(t);e.target=t,e._callbacks={},e._directMap={};var i,s={},o=!1,a=!1,r=!1;function l(t){t=t||{};var e,i=!1;for(e in s)t[e]?i=!0:s[e]=0;i||(r=!1)}function h(t,i,o,n,a,r){var l,h,c,p,d=[],u=o.type;if(!e._callbacks[t])return[];for("keyup"==u&&m(t)&&(i=[t]),l=0;l<e._callbacks[t].length;++l)if(h=e._callbacks[t][l],(n||!h.seq||s[h.seq]==h.level)&&u==h.action&&("keypress"==u&&!o.metaKey&&!o.ctrlKey||(c=i,p=h.modifiers,c.sort().join(",")===p.sort().join(",")))){var f=!n&&h.combo==a,g=n&&h.seq==n&&h.level==r;(f||g)&&e._callbacks[t].splice(l,1),d.push(h)}return d}function c(t,i,s,o){e.stopCallback(i,i.target||i.srcElement,s,o)||!1===t(i,s)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(i),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(i))}function p(t){"number"!=typeof t.which&&(t.which=t.keyCode);var i=f(t);i&&("keyup"!=t.type||o!==i?e.handleKey(i,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):o=!1)}function d(t,e,n,a){function h(e){return function(){r=e,++s[t],clearTimeout(i),i=setTimeout(l,1e3)}}function p(e){c(n,e,t),"keyup"!==a&&(o=f(e)),setTimeout(l,10)}s[t]=0;for(var d=0;d<e.length;++d){var u=d+1===e.length?p:h(a||v(e[d+1]).action);g(e[d],u,a,t,d)}}function g(t,i,s,o,n){e._directMap[t+":"+s]=i;var a,r=(t=t.replace(/\s+/g," ")).split(" ");r.length>1?d(t,r,i,s):(a=v(t,s),e._callbacks[a.key]=e._callbacks[a.key]||[],h(a.key,a.modifiers,{type:a.action},o,t,n),e._callbacks[a.key][o?"unshift":"push"]({callback:i,modifiers:a.modifiers,action:a.action,seq:o,level:n,combo:t}))}e._handleKey=function(t,e,i){var s,o=h(t,e,i),n={},p=0,d=!1;for(s=0;s<o.length;++s)o[s].seq&&(p=Math.max(p,o[s].level));for(s=0;s<o.length;++s)if(o[s].seq){if(o[s].level!=p)continue;d=!0,n[o[s].seq]=1,c(o[s].callback,i,o[s].combo,o[s].seq)}else d||c(o[s].callback,i,o[s].combo);var u="keypress"==i.type&&a;i.type!=r||m(t)||u||l(n),a=d&&"keydown"==i.type},e._bindMultiple=function(t,e,i){for(var s=0;s<t.length;++s)g(t[s],e,i)},u(t,"keypress",p),u(t,"keydown",p),u(t,"keyup",p)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},4640:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var s=i(4644),o=i(167);const n=[-90,90],a=[-180,180];function r(t,e,i){let[s,o]=t,[n,a]=e;return void 0===i&&(i=.25),s<o?[s,o]:[Math.max(n,s-i),Math.min(a,o+i)]}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}).apply(this,arguments)}function h(t,e){let{points:i,width:h,height:c,minExtent:p,maxZoom:d,offset:u,padding:f=20}=e;const{bearing:m,pitch:g}=t,v=function(t){const e=r(Object(o.extent)(t,t=>t[1]),n),i=r(Object(o.extent)(t,t=>t[0]),a);return[[i[0],e[0]],[i[1],e[1]]]}(i);try{return l({},Object(s.c)({bounds:v,width:h,height:c,minExtent:p,maxZoom:d,offset:u,padding:f}),{bearing:m,pitch:g})}catch(t){console.error("Could not fit viewport",t)}return t}},4645:function(t,e,i){"use strict";i.d(e,"f",(function(){return o})),i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return u})),i.d(e,"d",(function(){return p})),i.d(e,"e",(function(){return y})),i.d(e,"c",(function(){return _}));i(4637);const s={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function o(t,e,i={}){return function(t,e={}){return Math.sign(n(t,e))}(t,i)!==e&&(function(t,e){const{start:i=0,end:s=t.length,size:o=2}=e,n=(s-i)/o,a=Math.floor(n/2);for(let e=0;e<a;++e){const s=i+e*o,a=i+(n-1-e)*o;for(let e=0;e<o;++e){const i=t[s+e];t[s+e]=t[a+e],t[a+e]=i}}}(t,i),!0)}function n(t,e={}){const{start:i=0,end:s=t.length}=e,o=e.size||2;let n=0;for(let e=i,a=s-o;e<s;e+=o)n+=(t[e]-t[a])*(t[e+1]+t[a+1]),a=e;return n/2}function a(t,e){const i=e.length,s=t.length;if(s>0){let o=!0;for(let n=0;n<i;n++)if(t[s-i+n]!==e[n]){o=!1;break}if(o)return!1}for(let o=0;o<i;o++)t[s+o]=e[o];return!0}function r(t,e){const i=e.length;for(let s=0;s<i;s++)t[s]=e[s]}function l(t,e,i,s,o=[]){const n=s+e*i;for(let e=0;e<i;e++)o[e]=t[n+e];return o}function h(t,e,i,s,o=[]){let n,a;if(8&i)n=(s[3]-t[1])/(e[1]-t[1]),a=3;else if(4&i)n=(s[1]-t[1])/(e[1]-t[1]),a=1;else if(2&i)n=(s[2]-t[0])/(e[0]-t[0]),a=2;else{if(!(1&i))return null;n=(s[0]-t[0])/(e[0]-t[0]),a=0}for(let i=0;i<t.length;i++)o[i]=(1&a)===i?s[a]:n*(e[i]-t[i])+t[i];return o}function c(t,e){let i=0;return t[0]<e[0]?i|=1:t[0]>e[2]&&(i|=2),t[1]<e[1]?i|=4:t[1]>e[3]&&(i|=8),i}function p(t,e={}){const{size:i=2,broken:s=!1,gridResolution:o=10,gridOffset:n=[0,0],startIndex:p=0,endIndex:d=t.length}=e,u=(d-p)/i;let f=[];const v=[f],y=l(t,0,i,p);let _,b;const w=m(y,o,n,[]),P=[];a(f,y);for(let e=1;e<u;e++){for(_=l(t,e,i,p,_),b=c(_,w);b;){h(y,_,b,w,P);const t=c(P,w);t&&(h(y,P,t,w,P),b=t),a(f,P),r(y,P),g(w,o,b),s&&f.length>i&&(f=[],v.push(f),a(f,y)),b=c(_,w)}a(f,_),r(y,_)}return s?v:v[0]}function d(t,e){for(let i=0;i<e.length;i++)t.push(e[i]);return t}function u(t,e,i={}){if(!t.length)return[];const{size:s=2,gridResolution:o=10,gridOffset:n=[0,0],edgeTypes:a=!1}=i,r=[],l=[{pos:t,types:a&&new Array(t.length/s).fill(1),holes:e||[]}],h=[[],[]];let p=[];for(;l.length;){const{pos:t,types:e,holes:i}=l.shift();v(t,s,i[0]||t.length,h),p=m(h[0],o,n,p);const u=c(h[1],p);if(u){let o=f(t,e,s,0,i[0]||t.length,p,u);const n={pos:o[0].pos,types:o[0].types,holes:[]},r={pos:o[1].pos,types:o[1].types,holes:[]};l.push(n,r);for(let l=0;l<i.length;l++)o=f(t,e,s,i[l],i[l+1]||t.length,p,u),o[0]&&(n.holes.push(n.pos.length),n.pos=d(n.pos,o[0].pos),a&&(n.types=d(n.types,o[0].types))),o[1]&&(r.holes.push(r.pos.length),r.pos=d(r.pos,o[1].pos),a&&(r.types=d(r.types,o[1].types)))}else{const s={positions:t};a&&(s.edgeTypes=e),i.length&&(s.holeIndices=i),r.push(s)}}return r}function f(t,e,i,s,o,n,c){const p=(o-s)/i,d=[],u=[],f=[],m=[],g=[];let v,y,_;const b=l(t,p-1,i,s);let w=Math.sign(8&c?b[1]-n[3]:b[0]-n[2]),P=e&&e[p-1],x=0,C=0;for(let o=0;o<p;o++)v=l(t,o,i,s,v),y=Math.sign(8&c?v[1]-n[3]:v[0]-n[2]),_=e&&e[s/i+o],y&&w&&w!==y&&(h(b,v,c,n,g),a(d,g)&&f.push(P),a(u,g)&&m.push(P)),y<=0?(a(d,v)&&f.push(_),x-=y):f.length&&(f[f.length-1]=0),y>=0?(a(u,v)&&m.push(_),C+=y):m.length&&(m[m.length-1]=0),r(b,v),w=y,P=_;return[x?{pos:d,types:e&&f}:null,C?{pos:u,types:e&&m}:null]}function m(t,e,i,s){const o=Math.floor((t[0]-i[0])/e)*e+i[0],n=Math.floor((t[1]-i[1])/e)*e+i[1];return s[0]=o,s[1]=n,s[2]=o+e,s[3]=n+e,s}function g(t,e,i){8&i?(t[1]+=e,t[3]+=e):4&i?(t[1]-=e,t[3]-=e):2&i?(t[0]+=e,t[2]+=e):1&i&&(t[0]-=e,t[2]-=e)}function v(t,e,i,s){let o=1/0,n=-1/0,a=1/0,r=-1/0;for(let s=0;s<i;s+=e){const e=t[s],i=t[s+1];o=e<o?e:o,n=e>n?e:n,a=i<a?i:a,r=i>r?i:r}return s[0][0]=o,s[0][1]=a,s[1][0]=n,s[1][1]=r,s}function y(t,e={}){const{size:i=2,startIndex:s=0,endIndex:o=t.length,normalize:n=!0}=e,a=t.slice(s,o);P(a,i,0,o-s);const r=p(a,{size:i,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(n)for(const t of r)x(t,i);return r}function _(t,e,i={}){const{size:s=2,normalize:o=!0,edgeTypes:n=!1}=i;e=e||[];const a=[],r=[];let l=0,h=0;for(let o=0;o<=e.length;o++){const n=e[o]||t.length,c=h,p=b(t,s,l,n);for(let e=p;e<n;e++)a[h++]=t[e];for(let e=l;e<p;e++)a[h++]=t[e];P(a,s,c,h),w(a,s,c,h,i.maxLatitude),l=n,r[o]=h}r.pop();const c=u(a,r,{size:s,gridResolution:360,gridOffset:[-180,-180],edgeTypes:n});if(o)for(const t of c)x(t.positions,s);return c}function b(t,e,i,s){let o=-1,n=-1;for(let a=i+1;a<s;a+=e){const e=Math.abs(t[a]);e>o&&(o=e,n=a-1)}return n}function w(t,e,i,s,o=85.051129){const n=t[i],r=t[s-e];if(Math.abs(n-r)>180){const s=l(t,0,e,i);s[0]+=360*Math.round((r-n)/360),a(t,s),s[1]=Math.sign(s[1])*o,a(t,s),s[0]=n,a(t,s)}}function P(t,e,i,s){let o,n=t[0];for(let a=i;a<s;a+=e){o=t[a];const e=o-n;(e>180||e<-180)&&(o-=360*Math.round(e/360)),t[a]=n=o}}function x(t,e){let i;const s=t.length/e;for(let o=0;o<s&&(i=t[o*e],(i+180)%360==0);o++);const o=360*-Math.round(i/360);if(0!==o)for(let i=0;i<s;i++)t[i*e]+=o}},4646:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var s=i(37),o=i.n(s);const n=[1,0,1,0,0,0,0];function a(t,e){const i=parseInt(o()(e).format("x"),10);return parseInt(o()(e).add(t).format("x"),10)-i}function r(t,e){const i=o()(Number(t.reduce((t,e)=>t<e?t:e))),s=o()(Number(t.reduce((t,e)=>t>e?t:e)));let r,l,h;if(e.includes("/")){const t=e.split("/",2);t[0].endsWith("Z")?(l=o()(t[0]),r=o.a.duration(t[1])):(l=o()(t[1]),r=o.a.duration(t[0]))}else r=o.a.duration(e),l=function(t,e){const i=o()(t).subtract(e),s=t.toArray(),a=i.toArray(),r=s.map((t,e)=>a[e]!==t).indexOf(!0),l=s.map((t,e)=>{if(e===r){const i=t-a[e];return t-(t-n[e])%i}return e<r||-1===r?t:n[e]});return o()(l)}(i,r);const c=i.valueOf();for(h=l.clone();h.valueOf()<c;)h.add(r);for(;h.valueOf()>c;)h.subtract(r);let p;const d=s.valueOf();for(p=l.clone();p.valueOf()>d;)p.subtract(r);for(;p.valueOf()<d;)p.add(r);const u=null!=e?[h,h.clone().add(r)]:[h,p],f=t.every(t=>null===t);return{start:parseInt(h.format("x"),10),end:parseInt(p.format("x"),10),getStep:a.bind(this,r),values:u.map(t=>parseInt(t.format("x"),10)),disabled:f}}},4648:function(t,e,i){"use strict";i.d(e,"a",(function(){return y}));var s=i(0),o=i.n(s),n=i(2),a=i.n(n),r=i(4647),l=i(1685),h=i.n(l),c=i(13),p=i(4654),d=i.n(p);i(4656),i(4657);function u(t){return o.a.createElement("span",{className:"BootstrapSliderWrapper"},o.a.createElement(d.a,t))}i(4658);const f={start:a.a.number.isRequired,step:a.a.number.isRequired,end:a.a.number.isRequired,values:a.a.array.isRequired,onChange:a.a.func,loopDuration:a.a.number,maxFrames:a.a.number,orientation:a.a.oneOf(["horizontal","vertical"]),reversed:a.a.bool,disabled:a.a.bool,range:a.a.bool};class m extends o.a.PureComponent{constructor(t){super(t),this.state={intervalId:null};const e=t.end-t.start,i=Math.min(t.maxFrames,e/t.step),s=e/i;this.intervalMilliseconds=t.loopDuration/i,this.increment=s<t.step?t.step:s-s%t.step,this.onChange=this.onChange.bind(this),this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.stepBackward=this.stepBackward.bind(this),this.stepForward=this.stepForward.bind(this),this.getPlayClass=this.getPlayClass.bind(this),this.formatter=this.formatter.bind(this)}componentDidMount(){h.a.bind(["space"],this.play)}componentWillUnmount(){h.a.unbind(["space"])}onChange(t){this.props.onChange(t.target.value),null!=this.state.intervalId&&this.pause()}getPlayClass(){return null==this.state.intervalId?"fa fa-play fa-lg slider-button":"fa fa-pause fa-lg slider-button"}play(){if(!this.props.disabled)if(null!=this.state.intervalId)this.pause();else{const t=setInterval(this.stepForward,this.intervalMilliseconds);this.setState({intervalId:t})}}pause(){clearInterval(this.state.intervalId),this.setState({intervalId:null})}stepForward(){const{start:t,end:e,step:i,values:s,disabled:o}=this.props;if(o)return;const n=(Array.isArray(s)?s:[s,s+i]).map(t=>t+this.increment),a=n[1]>e?n[0]-t:0;this.props.onChange(n.map(t=>t-a))}stepBackward(){const{start:t,end:e,step:i,values:s,disabled:o}=this.props;if(o)return;const n=(Array.isArray(s)?s:[s,s+i]).map(t=>t-this.increment),a=n[0]<t?e-n[1]:0;this.props.onChange(n.map(t=>t+a))}formatter(t){if(this.props.disabled)return Object(c.e)("Data has no time steps");let e=t;return Array.isArray(t)?t[0]===t[1]&&(e=[t[0]]):e=[t],e.map(t=>new Date(t).toUTCString()).join(" : ")}render(){const{start:t,end:e,step:i,orientation:s,reversed:n,disabled:a,range:r,values:l}=this.props;return o.a.createElement("div",{className:"play-slider"},o.a.createElement("div",{className:"play-slider-controls padded"},o.a.createElement("i",{className:"fa fa-step-backward fa-lg slider-button ",onClick:this.stepBackward}),o.a.createElement("i",{className:this.getPlayClass(),onClick:this.play}),o.a.createElement("i",{className:"fa fa-step-forward fa-lg slider-button ",onClick:this.stepForward})),o.a.createElement("div",{className:"play-slider-scrobbler padded"},o.a.createElement(u,{value:r?l:l[0],range:r,formatter:this.formatter,change:this.onChange,min:t,max:e,step:i,orientation:s,reversed:n,disabled:a?"disabled":"enabled"})))}}function g(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}m.propTypes=f,m.defaultProps={onChange:()=>{},loopDuration:15e3,maxFrames:100,orientation:"horizontal",reversed:!1,disabled:!1,range:!0};const v={getLayers:a.a.func.isRequired,start:a.a.number.isRequired,end:a.a.number.isRequired,getStep:a.a.func,values:a.a.array.isRequired,aggregation:a.a.bool,disabled:a.a.bool,viewport:a.a.object.isRequired,children:a.a.node,mapStyle:a.a.string,mapboxApiAccessToken:a.a.string.isRequired,setControlValue:a.a.func,onValuesChange:a.a.func,width:a.a.number.isRequired,height:a.a.number.isRequired};class y extends o.a.PureComponent{constructor(){super(...arguments),g(this,"containerRef",o.a.createRef()),g(this,"setTooltip",t=>{const{current:e}=this.containerRef;e&&e.setTooltip(t)})}render(){const{start:t,end:e,getStep:i,disabled:s,aggregation:n,children:a,getLayers:l,values:h,onValuesChange:c,viewport:p,setControlValue:d,mapStyle:u,mapboxApiAccessToken:f,height:g,width:v}=this.props,y=l(h);return o.a.createElement("div",null,o.a.createElement(r.a,{ref:this.containerRef,viewport:p,layers:y,setControlValue:d,mapStyle:u,mapboxApiAccessToken:f,bottomMargin:s?0:20,width:v,height:g}),!s&&o.a.createElement(m,{start:t,end:e,step:i(t),values:h,range:!n,onChange:c}),a)}}y.propTypes=v,y.defaultProps={aggregation:!1,disabled:!1,mapStyle:"light",setControlValue:()=>{},onValuesChange:()=>{}}},4654:function(t,e,i){var s,o,n;o=[e,i(90),i(217),i(265),i(255),i(256),i(0),i(2),i(4655)],void 0===(n="function"==typeof(s=function(t,e,i,s,o,n,a,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactBootstrapSlider=void 0;var h=v(e),c=v(i),p=v(s),d=v(o),u=v(n),f=v(a),m=v(r),g=v(l);function v(t){return t&&t.__esModule?t:{default:t}}var y=t.ReactBootstrapSlider=function(t){function e(){var t,i,s,o;(0,c.default)(this,e);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return i=s=(0,d.default)(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),s.checkAndDoDisabled=function(){var t="disabled"!==s.props.disabled,e=s.mySlider.isEnabled();t?e||s.mySlider.enable():e&&s.mySlider.disable()},s.updateSliderValues=function(){void 0===s.props.min||void 0===s.mySlider.min&&void 0===s.mySlider.options.min||s.mySlider.setAttribute("min",s.props.min),void 0===s.props.max||void 0===s.mySlider.max&&void 0===s.mySlider.options.max||s.mySlider.setAttribute("max",s.props.max),void 0===s.props.step||void 0===s.mySlider.step&&void 0===s.mySlider.options.step||s.mySlider.setAttribute("step",s.props.step),s.mySlider.setValue(s.props.value),s.checkAndDoDisabled()},o=i,(0,d.default)(s,o)}return(0,u.default)(e,t),(0,p.default)(e,[{key:"componentDidMount",value:function(){var t=this,e=(0,h.default)({},this.props,{tooltip:this.props.tooltip||"show"});if(this.mySlider=new g.default(this.node,e),this.props.change||this.props.handleChange){var i=this.props.change||this.props.handleChange;this.mySlider.on("change",(function(t){var e={target:{}};e.target.value=t.newValue,i(e)}))}this.props.slideStop&&this.mySlider.on("slideStop",(function(e){var i={target:{}};i.target.value=e,t.props.slideStop(i)})),this.checkAndDoDisabled()}},{key:"componentDidUpdate",value:function(){this.updateSliderValues()}},{key:"componentWillUnmount",value:function(){this.mySlider.destroy()}},{key:"render",value:function(){var t=this;return f.default.createElement("div",{ref:function(e){return t.node=e}})}}]),e}(f.default.Component);y.propTypes={min:m.default.number,max:m.default.number,step:m.default.number,value:m.default.oneOfType([m.default.number,m.default.arrayOf(m.default.number.isRequired).isRequired]).isRequired,disabled:m.default.string,tooltip:m.default.string,change:m.default.func,handleChange:m.default.func,slideStop:m.default.func,labelledby:m.default.oneOfType([m.default.string,m.default.arrayOf(m.default.string)])},t.default=y})?s.apply(e,o):s)||(t.exports=n)},4655:function(t,e,i){"use strict";var s,o,n,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="object"===("undefined"==typeof window?"undefined":a(window));o=[i(107)],void 0===(n="function"==typeof(s=function(t){var e;return r&&!window.console&&(window.console={}),r&&!window.console.log&&(window.console.log=function(){}),r&&!window.console.warn&&(window.console.warn=function(){}),function(t){var e=Array.prototype.slice;function i(){}!function(t){if(t){var s="undefined"==typeof console?i:function(t){console.error(t)};t.bridget=function(i,o){!function(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}(o),function(i,o){t.fn[i]=function(n){if("string"==typeof n){for(var a=e.call(arguments,1),r=0,l=this.length;r<l;r++){var h=this[r],c=t.data(h,i);if(c)if(t.isFunction(c[n])&&"_"!==n.charAt(0)){var p=c[n].apply(c,a);if(void 0!==p&&p!==c)return p}else s("no such method '"+n+"' for "+i+" instance");else s("cannot call methods on "+i+" prior to initialization; attempted to call '"+n+"'")}return this}var d=this.map((function(){var e=t.data(this,i);return e?(e.option(n),e._init()):(e=new o(this,n),t.data(this,i,e)),t(this)}));return!d||d.length>1?d:d[0]}}(i,o)},t.bridget}}(t)}(t),function(t){var i=function(t){return"Invalid input value '"+t+"' passed in"},s={linear:{toValue:function(t){var e=t/100*(this.options.max-this.options.min),i=!0;if(this.options.ticks_positions.length>0){for(var s,o,n,a=0,r=1;r<this.options.ticks_positions.length;r++)if(t<=this.options.ticks_positions[r]){s=this.options.ticks[r-1],n=this.options.ticks_positions[r-1],o=this.options.ticks[r],a=this.options.ticks_positions[r];break}e=s+(t-n)/(a-n)*(o-s),i=!1}var l=(i?this.options.min:0)+Math.round(e/this.options.step)*this.options.step;return l<this.options.min?this.options.min:l>this.options.max?this.options.max:l},toPercentage:function(t){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var e,i,s,o=0,n=0;n<this.options.ticks.length;n++)if(t<=this.options.ticks[n]){e=n>0?this.options.ticks[n-1]:0,s=n>0?this.options.ticks_positions[n-1]:0,i=this.options.ticks[n],o=this.options.ticks_positions[n];break}if(n>0)return s+(t-e)/(i-e)*(o-s)}return 100*(t-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(t){var e=0===this.options.min?0:Math.log(this.options.min),i=Math.log(this.options.max),s=Math.exp(e+(i-e)*t/100);return Math.round(s)===this.options.max?this.options.max:(s=this.options.min+Math.round((s-this.options.min)/this.options.step)*this.options.step)<this.options.min?this.options.min:s>this.options.max?this.options.max:s},toPercentage:function(t){if(this.options.max===this.options.min)return 0;var e=Math.log(this.options.max),i=0===this.options.min?0:Math.log(this.options.min);return 100*((0===t?0:Math.log(t))-i)/(e-i)}}};function o(e,i){this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},this.ticksCallbackMap={},this.handleCallbackMap={},"string"==typeof e?this.element=document.querySelector(e):e instanceof HTMLElement&&(this.element=e),i=i||{};for(var o=Object.keys(this.defaultOptions),n=0;n<o.length;n++){var a=o[n],r=i[a];r=null!==(r=void 0!==r?r:l(this.element,a))?r:this.defaultOptions[a],this.options||(this.options={}),this.options[a]=r}function l(t,e){var i="data-slider-"+e.replace(/_/g,"-"),s=t.getAttribute(i);try{return JSON.parse(s)}catch(t){return s}}"auto"===this.options.rtl&&(this.options.rtl="rtl"===window.getComputedStyle(this.element).direction),"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.rtl?this.options.tooltip_position="left":this.options.tooltip_position="right";var h,c,p,d,u,f=this.element.style.width,m=!1,g=this.element.parentNode;if(this.sliderElem)m=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var v=document.createElement("div");v.className="slider-track",(c=document.createElement("div")).className="slider-track-low",(h=document.createElement("div")).className="slider-selection",(p=document.createElement("div")).className="slider-track-high",(d=document.createElement("div")).className="slider-handle min-slider-handle",d.setAttribute("role","slider"),d.setAttribute("aria-valuemin",this.options.min),d.setAttribute("aria-valuemax",this.options.max),(u=document.createElement("div")).className="slider-handle max-slider-handle",u.setAttribute("role","slider"),u.setAttribute("aria-valuemin",this.options.min),u.setAttribute("aria-valuemax",this.options.max),v.appendChild(c),v.appendChild(h),v.appendChild(p),this.rangeHighlightElements=[];var y=this.options.rangeHighlights;if(Array.isArray(y)&&y.length>0)for(var _=0;_<y.length;_++){var b=document.createElement("div"),w=y[_].class||"";b.className="slider-rangeHighlight slider-selection "+w,this.rangeHighlightElements.push(b),v.appendChild(b)}var P=Array.isArray(this.options.labelledby);if(P&&this.options.labelledby[0]&&d.setAttribute("aria-labelledby",this.options.labelledby[0]),P&&this.options.labelledby[1]&&u.setAttribute("aria-labelledby",this.options.labelledby[1]),!P&&this.options.labelledby&&(d.setAttribute("aria-labelledby",this.options.labelledby),u.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(this.ticksContainer=document.createElement("div"),this.ticksContainer.className="slider-tick-container",n=0;n<this.options.ticks.length;n++){var x=document.createElement("div");if(x.className="slider-tick",this.options.ticks_tooltip){var C=this._addTickListener(),E=C.addMouseEnter(this,x,n),k=C.addMouseLeave(this,x);this.ticksCallbackMap[n]={mouseEnter:E,mouseLeave:k}}this.ticks.push(x),this.ticksContainer.appendChild(x)}h.className+=" tick-slider-selection"}if(this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",n=0;n<this.options.ticks_labels.length;n++){var S=document.createElement("div"),L=0===this.options.ticks_positions.length,A=this.options.reversed&&L?this.options.ticks_labels.length-(n+1):n;S.className="slider-tick-label",S.innerHTML=this.options.ticks_labels[A],this.tickLabels.push(S),this.tickLabelContainer.appendChild(S)}var T=function(t){var e=document.createElement("div");e.className="tooltip-arrow";var i=document.createElement("div");i.className="tooltip-inner",t.appendChild(e),t.appendChild(i)},M=document.createElement("div");M.className="tooltip tooltip-main",M.setAttribute("role","presentation"),T(M);var O=document.createElement("div");O.className="tooltip tooltip-min",O.setAttribute("role","presentation"),T(O);var R=document.createElement("div");R.className="tooltip tooltip-max",R.setAttribute("role","presentation"),T(R),this.sliderElem.appendChild(v),this.sliderElem.appendChild(M),this.sliderElem.appendChild(O),this.sliderElem.appendChild(R),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),this.ticksContainer&&this.sliderElem.appendChild(this.ticksContainer),this.sliderElem.appendChild(d),this.sliderElem.appendChild(u),g.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(t&&(this.$element=t(this.element),this.$sliderElem=t(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.touchX=0,this.touchY=0,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),s[this.options.scale]&&(this.options.scale=s[this.options.scale]),!0===m&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.sliderElem,"slider-rtl"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","right","top","width","height"].forEach((function(t){this._removeProperty(this.trackLow,t),this._removeProperty(this.trackSelection,t),this._removeProperty(this.trackHigh,t)}),this),[this.handle1,this.handle2].forEach((function(t){this._removeProperty(t,"left"),this._removeProperty(t,"right"),this._removeProperty(t,"top")}),this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach((function(t){this._removeProperty(t,"left"),this._removeProperty(t,"right"),this._removeProperty(t,"top"),this._removeProperty(t,"margin-left"),this._removeProperty(t,"margin-right"),this._removeProperty(t,"margin-top"),this._removeClass(t,"right"),this._removeClass(t,"left"),this._removeClass(t,"top")}),this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=f,this.options.orientation="horizontal",this.options.rtl?this.stylePos="right":this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this.options.rtl&&this._addClass(this.sliderElem,"slider-rtl"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this.options.range?this._state.value=[this.options.value,this.options.max]:this._state.value=this.options.value,this.trackLow=c||this.trackLow,this.trackSelection=h||this.trackSelection,this.trackHigh=p||this.trackHigh,"none"===this.options.selection?(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")):"after"!==this.options.selection&&"before"!==this.options.selection||(this._removeClass(this.trackLow,"hide"),this._removeClass(this.trackSelection,"hide"),this._removeClass(this.trackHigh,"hide")),this.handle1=d||this.handle1,this.handle2=u||this.handle2,!0===m)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),n=0;n<this.ticks.length;n++)this._removeClass(this.ticks[n],"round triangle hide");if(-1!==["round","triangle","custom"].indexOf(this.options.handle))for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),n=0;n<this.ticks.length;n++)this._addClass(this.ticks[n],this.options.handle);if(this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchstart=this._touchstart.bind(this),this.touchmove=this._touchmove.bind(this),this.touchCapable){var z=!1;try{var j=Object.defineProperty({},"passive",{get:function(){z=!0}});window.addEventListener("test",null,j)}catch(t){}var N=!!z&&{passive:!0};this.sliderElem.addEventListener("touchstart",this.touchstart,N),this.sliderElem.addEventListener("touchmove",this.touchmove,N)}if(this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip)this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide");else if("always"===this.options.tooltip)this._showTooltip(),this._alwaysShowTooltip=!0;else{if(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.options.ticks_tooltip){var D=this._addTickListener(),F=D.addMouseEnter(this,this.handle1),V=D.addMouseLeave(this,this.handle1);this.handleCallbackMap.handle1={mouseEnter:F,mouseLeave:V},F=D.addMouseEnter(this,this.handle2),V=D.addMouseLeave(this,this.handle2),this.handleCallbackMap.handle2={mouseEnter:F,mouseLeave:V}}else this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1);this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)}this.options.enabled?this.enable():this.disable()}if((e=function(t,e){return o.call(this,t,e),this}).prototype={_init:function(){},constructor:e,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,rtl:"auto",enabled:!0,formatter:function(t){return Array.isArray(t)?t[0]+" : "+t[1]:t},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,ticks_tooltip:!1,scale:"linear",focus:!1,tooltip_position:null,labelledby:null,rangeHighlights:[]},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(t,e,i){t||(t=0);var s=this.getValue();this._state.value=this._validateInputValue(t);var o=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=o(this._state.value[0]),this._state.value[1]=o(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=o(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),"after"===this.options.selection?this._state.value[1]=this.options.max:this._state.value[1]=this.options.min),this.options.max>this.options.min?this._state.percentage=[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:this._state.percentage=[0,0,100],this._layout();var n=this.options.range?this._state.value:this._state.value[0];return this._setDataVal(n),!0===e&&this._trigger("slide",n),s!==n&&!0===i&&this._trigger("change",{oldValue:s,newValue:n}),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),t&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(t,e){return this._bindNonQueryEventHandler(t,e),this},off:function(e,i){t?(this.$element.off(e,i),this.$sliderElem.off(e,i)):this._unbindNonQueryEventHandler(e,i)},getAttribute:function(t){return t?this.options[t]:this.options},setAttribute:function(t,e){return this.options[t]=e,this},refresh:function(){return this._removeSliderEventHandlers(),o.call(this,this.element,this.options),t&&t.data(this.element,"slider",this),this},relayout:function(){return this._resize(),this._layout(),this},_removeSliderEventHandlers:function(){if(this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.options.ticks_tooltip){for(var t=this.ticksContainer.getElementsByClassName("slider-tick"),e=0;e<t.length;e++)t[e].removeEventListener("mouseenter",this.ticksCallbackMap[e].mouseEnter,!1),t[e].removeEventListener("mouseleave",this.ticksCallbackMap[e].mouseLeave,!1);this.handle1.removeEventListener("mouseenter",this.handleCallbackMap.handle1.mouseEnter,!1),this.handle2.removeEventListener("mouseenter",this.handleCallbackMap.handle2.mouseEnter,!1),this.handle1.removeEventListener("mouseleave",this.handleCallbackMap.handle1.mouseLeave,!1),this.handle2.removeEventListener("mouseleave",this.handleCallbackMap.handle2.mouseLeave,!1)}this.handleCallbackMap=null,this.ticksCallbackMap=null,this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.touchstart,!1),this.sliderElem.removeEventListener("touchmove",this.touchmove,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1),window.removeEventListener("resize",this.resize,!1)},_bindNonQueryEventHandler:function(t,e){void 0===this.eventToCallbackMap[t]&&(this.eventToCallbackMap[t]=[]),this.eventToCallbackMap[t].push(e)},_unbindNonQueryEventHandler:function(t,e){var i=this.eventToCallbackMap[t];if(void 0!==i)for(var s=0;s<i.length;s++)if(i[s]===e){i.splice(s,1);break}},_cleanUpEventCallbacksMap:function(){for(var t=Object.keys(this.eventToCallbackMap),e=0;e<t.length;e++){var i=t[e];delete this.eventToCallbackMap[i]}},_showTooltip:function(){!1===this.options.tooltip_split?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){!1===this._state.inDrag&&!0!==this.alwaysShowTooltip&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_setToolTipOnMouseOver:function(t){var e=this.options.formatter(t?t.value[0]:this._state.value[0]),i=s(t||this._state,this.options.reversed);function s(t,e){return e?[100-t.percentage[0],this.options.range?100-t.percentage[1]:t.percentage[1]]:[t.percentage[0],t.percentage[1]]}this._setText(this.tooltipInner,e),this.tooltip.style[this.stylePos]=i[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/2+"px")},_addTickListener:function(){return{addMouseEnter:function(t,e,i){var s=function(){var e=t._state,s=i>=0?i:this.attributes["aria-valuenow"].value,o=parseInt(s,10);e.value[0]=o,e.percentage[0]=t.options.ticks_positions[o],t._setToolTipOnMouseOver(e),t._showTooltip()};return e.addEventListener("mouseenter",s,!1),s},addMouseLeave:function(t,e){var i=function(){t._hideTooltip()};return e.addEventListener("mouseleave",i,!1),i}}},_layout:function(){var t,e;if(t=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=t[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),isNaN(this.options.formatter(this._state.value[0]))&&this.handle1.setAttribute("aria-valuetext",this.options.formatter(this._state.value[0])),this.handle2.style[this.stylePos]=t[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),isNaN(this.options.formatter(this._state.value[1]))&&this.handle2.setAttribute("aria-valuetext",this.options.formatter(this._state.value[1])),this.rangeHighlightElements.length>0&&Array.isArray(this.options.rangeHighlights)&&this.options.rangeHighlights.length>0)for(var i=0;i<this.options.rangeHighlights.length;i++){var s=this._toPercentage(this.options.rangeHighlights[i].start),o=this._toPercentage(this.options.rangeHighlights[i].end);if(this.options.reversed){var n=100-o;o=100-s,s=n}var a=this._createHighlightRange(s,o);a?"vertical"===this.options.orientation?(this.rangeHighlightElements[i].style.top=a.start+"%",this.rangeHighlightElements[i].style.height=a.size+"%"):(this.options.rtl?this.rangeHighlightElements[i].style.right=a.start+"%":this.rangeHighlightElements[i].style.left=a.start+"%",this.rangeHighlightElements[i].style.width=a.size+"%"):this.rangeHighlightElements[i].style.display="none"}if(Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var r,l="vertical"===this.options.orientation?"height":"width";r="vertical"===this.options.orientation?"marginTop":this.options.rtl?"marginRight":"marginLeft";var h=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var c=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[r]=-h/2+"px"),c=this.tickLabelContainer.offsetHeight;else for(p=0;p<this.tickLabelContainer.childNodes.length;p++)this.tickLabelContainer.childNodes[p].offsetHeight>c&&(c=this.tickLabelContainer.childNodes[p].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=c+"px")}for(var p=0;p<this.options.ticks.length;p++){var d=this.options.ticks_positions[p]||this._toPercentage(this.options.ticks[p]);this.options.reversed&&(d=100-d),this.ticks[p].style[this.stylePos]=d+"%",this._removeClass(this.ticks[p],"in-selection"),this.options.range?d>=t[0]&&d<=t[1]&&this._addClass(this.ticks[p],"in-selection"):"after"===this.options.selection&&d>=t[0]?this._addClass(this.ticks[p],"in-selection"):"before"===this.options.selection&&d<=t[0]&&this._addClass(this.ticks[p],"in-selection"),this.tickLabels[p]&&(this.tickLabels[p].style[l]=h+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[p]?(this.tickLabels[p].style.position="absolute",this.tickLabels[p].style[this.stylePos]=d+"%",this.tickLabels[p].style[r]=-h/2+"px"):"vertical"===this.options.orientation&&(this.options.rtl?this.tickLabels[p].style.marginRight=this.sliderElem.offsetWidth+"px":this.tickLabels[p].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style[r]=this.sliderElem.offsetWidth/2*-1+"px"))}}if(this.options.range){e=this.options.formatter(this._state.value),this._setText(this.tooltipInner,e),this.tooltip.style[this.stylePos]=(t[1]+t[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/2+"px");var u=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,u);var f=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,f),this.tooltip_min.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-"+this.stylePos,-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-"+this.stylePos,-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=t[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-"+this.stylePos,-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-"+this.stylePos,-this.tooltip_max.offsetWidth/2+"px")}else e=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,e),this.tooltip.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(t[0],t[1])+"%",this.trackSelection.style.top=Math.min(t[0],t[1])+"%",this.trackSelection.style.height=Math.abs(t[0]-t[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";else{"right"===this.stylePos?this.trackLow.style.right="0":this.trackLow.style.left="0",this.trackLow.style.width=Math.min(t[0],t[1])+"%","right"===this.stylePos?this.trackSelection.style.right=Math.min(t[0],t[1])+"%":this.trackSelection.style.left=Math.min(t[0],t[1])+"%",this.trackSelection.style.width=Math.abs(t[0]-t[1])+"%","right"===this.stylePos?this.trackHigh.style.left="0":this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";var m=this.tooltip_min.getBoundingClientRect(),g=this.tooltip_max.getBoundingClientRect();"bottom"===this.options.tooltip_position?m.right>g.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):m.right>g.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_createHighlightRange:function(t,e){return this._isHighlightRange(t,e)?t>e?{start:e,size:t-e}:{start:t,size:e-t}:null},_isHighlightRange:function(t,e){return 0<=t&&t<=100&&0<=e&&e<=100},_resize:function(t){this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(t,e){t.style.removeProperty?t.style.removeProperty(e):t.style.removeAttribute(e)},_mousedown:function(t){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var e=this._getPercentage(t);if(this.options.range){var i=Math.abs(this._state.percentage[0]-e),s=Math.abs(this._state.percentage[1]-e);this._state.dragged=i<s?0:1,this._adjustPercentageForRangeSliders(e)}else this._state.dragged=0;this._state.percentage[this._state.dragged]=e,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var o=this._calculateValue();return this._trigger("slideStart",o),this._setDataVal(o),this.setValue(o,!1,!0),t.returnValue=!1,this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_touchstart:function(t){if(void 0!==t.changedTouches){var e=t.changedTouches[0];this.touchX=e.pageX,this.touchY=e.pageY}else this._mousedown(t)},_triggerFocusOnHandle:function(t){0===t&&this.handle1.focus(),1===t&&this.handle2.focus()},_keydown:function(t,e){if(!this._state.enabled)return!1;var i;switch(e.keyCode){case 37:case 40:i=-1;break;case 39:case 38:i=1}if(i){if(this.options.natural_arrow_keys){var s="vertical"===this.options.orientation&&!this.options.reversed,o="horizontal"===this.options.orientation&&this.options.reversed;(s||o)&&(i=-i)}var n=this._state.value[t]+i*this.options.step,a=n/this.options.max*100;return this._state.keyCtrl=t,this.options.range&&(this._adjustPercentageForRangeSliders(a),n=[this._state.keyCtrl?this._state.value[0]:n,this._state.keyCtrl?n:this._state.value[1]]),this._trigger("slideStart",n),this._setDataVal(n),this.setValue(n,!0,!0),this._setDataVal(n),this._trigger("slideStop",n),this._layout(),this._pauseEvent(e),delete this._state.keyCtrl,!1}},_pauseEvent:function(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1},_mousemove:function(t){if(!this._state.enabled)return!1;var e=this._getPercentage(t);this._adjustPercentageForRangeSliders(e),this._state.percentage[this._state.dragged]=e,this._layout();var i=this._calculateValue(!0);return this.setValue(i,!0,!0),!1},_touchmove:function(t){if(void 0!==t.changedTouches){var e=t.changedTouches[0],i=e.pageX-this.touchX,s=e.pageY-this.touchY;this._state.inDrag||("vertical"===this.options.orientation&&i<=5&&i>=-5&&(s>=15||s<=-15)?this._mousedown(t):s<=5&&s>=-5&&(i>=15||i<=-15)&&this._mousedown(t))}},_adjustPercentageForRangeSliders:function(t){if(this.options.range){var e=this._getNumDigitsAfterDecimalPlace(t);e=e?e-1:0;var i=this._applyToFixedAndParseFloat(t,e);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],e)<i?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],e)>i?(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0):0===this._state.keyCtrl&&this._state.value[1]/this.options.max*100<t?(this._state.percentage[0]=this._state.percentage[1],this._state.keyCtrl=1,this.handle2.focus()):1===this._state.keyCtrl&&this._state.value[0]/this.options.max*100>t&&(this._state.percentage[1]=this._state.percentage[0],this._state.keyCtrl=0,this.handle1.focus())}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,!1===this._state.over&&this._hideTooltip();var t=this._calculateValue(!0);return this._layout(),this._setDataVal(t),this._trigger("slideStop",t),!1},_calculateValue:function(t){var e;if(this.options.range?(e=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(e[0]=this._toValue(this._state.percentage[0]),e[0]=this._applyPrecision(e[0])),100!==this._state.percentage[1]&&(e[1]=this._toValue(this._state.percentage[1]),e[1]=this._applyPrecision(e[1]))):(e=this._toValue(this._state.percentage[0]),e=parseFloat(e),e=this._applyPrecision(e)),t){for(var i=[e,1/0],s=0;s<this.options.ticks.length;s++){var o=Math.abs(this.options.ticks[s]-e);o<=i[1]&&(i=[this.options.ticks[s],o])}if(i[1]<=this.options.ticks_snap_bounds)return i[0]}return e},_applyPrecision:function(t){var e=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(t,e)},_getNumDigitsAfterDecimalPlace:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},_applyToFixedAndParseFloat:function(t,e){var i=t.toFixed(e);return parseFloat(i)},_getPercentage:function(t){!this.touchCapable||"touchstart"!==t.type&&"touchmove"!==t.type||(t=t.touches[0]);var e=t[this.mousePos]-this._state.offset[this.stylePos];"right"===this.stylePos&&(e=-e);var i=e/this._state.size*100;return i=Math.round(i/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(i=100-i),Math.max(0,Math.min(100,i))},_validateInputValue:function(t){if(isNaN(+t)){if(Array.isArray(t))return this._validateArray(t),t;throw new Error(i(t))}return+t},_validateArray:function(t){for(var e=0;e<t.length;e++){var s=t[e];if("number"!=typeof s)throw new Error(i(s))}},_setDataVal:function(t){this.element.setAttribute("data-value",t),this.element.setAttribute("value",t),this.element.value=t},_trigger:function(e,i){i=i||0===i?i:void 0;var s=this.eventToCallbackMap[e];if(s&&s.length)for(var o=0;o<s.length;o++)(0,s[o])(i);t&&this._triggerJQueryEvent(e,i)},_triggerJQueryEvent:function(t,e){var i={type:t,value:e};this.$element.trigger(i),this.$sliderElem.trigger(i)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(t,e){void 0!==t.textContent?t.textContent=e:void 0!==t.innerText&&(t.innerText=e)},_removeClass:function(t,e){for(var i=e.split(" "),s=t.className,o=0;o<i.length;o++){var n=i[o],a=new RegExp("(?:\\s|^)"+n+"(?:\\s|$)");s=s.replace(a," ")}t.className=s.trim()},_addClass:function(t,e){for(var i=e.split(" "),s=t.className,o=0;o<i.length;o++){var n=i[o];new RegExp("(?:\\s|^)"+n+"(?:\\s|$)").test(s)||(s+=" "+n)}t.className=s.trim()},_offsetLeft:function(t){return t.getBoundingClientRect().left},_offsetRight:function(t){return t.getBoundingClientRect().right},_offsetTop:function(t){for(var e=t.offsetTop;(t=t.offsetParent)&&!isNaN(t.offsetTop);)e+=t.offsetTop,"BODY"!==t.tagName&&(e-=t.scrollTop);return e},_offset:function(t){return{left:this._offsetLeft(t),right:this._offsetRight(t),top:this._offsetTop(t)}},_css:function(e,i,s){if(t)t.style(e,i,s);else{var o=i.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(t,e){return e.toUpperCase()}));e.style[o]=s}},_toValue:function(t){return this.options.scale.toValue.apply(this,[t])},_toPercentage:function(t){return this.options.scale.toPercentage.apply(this,[t])},_setTooltipPosition:function(){var t=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var e,i="left"===(e=this.options.tooltip_position?this.options.tooltip_position:this.options.rtl?"left":"right")?"right":"left";t.forEach(function(t){this._addClass(t,e),t.style[i]="100%"}.bind(this))}else"bottom"===this.options.tooltip_position?t.forEach(function(t){this._addClass(t,"bottom"),t.style.top="22px"}.bind(this)):t.forEach(function(t){this._addClass(t,"top"),t.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},t&&t.fn){var n=void 0;t.fn.slider?(r&&window.console.warn("bootstrap-slider.js - WARNING: $.fn.slider namespace is already bound. Use the $.fn.bootstrapSlider namespace instead."),n="bootstrapSlider"):(t.bridget("slider",e),n="slider"),t.bridget("bootstrapSlider",e),t((function(){t("input[data-provide=slider]")[n]()}))}}(t),e})?s.apply(e,o):s)||(t.exports=n)},4656:function(t,e,i){},4657:function(t,e,i){},4658:function(t,e,i){},4659:function(t,e,i){"use strict";i.d(e,"b",(function(){return E})),i.d(e,"a",(function(){return k}));var s=i(0),o=i.n(s),n=i(2),a=i.n(n),r=i(134),l=i(4647),h=i(917),c=i(4648),p=i(4661),d=i(4665),u=i(4646),f=i(4643),m=i(4640);function g(){return(g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}).apply(this,arguments)}function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const{getScale:y}=h.b;const _={formData:a.a.object.isRequired,mapboxApiKey:a.a.string.isRequired,setControlValue:a.a.func.isRequired,viewport:a.a.object.isRequired,getLayer:a.a.func.isRequired,getPoints:a.a.func.isRequired,payload:a.a.object.isRequired,onAddFilter:a.a.func,width:a.a.number.isRequired,height:a.a.number.isRequired};class b extends o.a.PureComponent{constructor(t){super(t),v(this,"containerRef",o.a.createRef()),v(this,"setTooltip",t=>{const{current:e}=this.containerRef;e&&e.setTooltip(t)}),this.state=this.getStateFromProps(t),this.getLayers=this.getLayers.bind(this),this.onValuesChange=this.onValuesChange.bind(this),this.toggleCategory=this.toggleCategory.bind(this),this.showSingleCategory=this.showSingleCategory.bind(this)}UNSAFE_componentWillReceiveProps(t){t.payload.form_data!==this.state.formData&&this.setState(g({},this.getStateFromProps(t)))}onValuesChange(t){this.setState({values:Array.isArray(t)?t:[t,t+this.state.getStep(t)]})}getStateFromProps(t,e){const i=t.payload.data.features||[],s=i.map(t=>t.__timestamp),o=function(t,e){const i=t.color_picker||{r:0,g:0,b:0,a:1},s=[i.r,i.g,i.b,255*i.a],o=y(t.color_scheme),n={};return e.forEach(e=>{if(null!=e.cat_color&&!n.hasOwnProperty(e.cat_color)){let a;a=t.dimension?Object(d.hexToRGB)(o(e.cat_color),255*i.a):s,n[e.cat_color]={color:a,enabled:!0}}}),n}(t.formData,i);if(e&&t.payload.form_data===e.formData)return g({},e,{categories:o});const n=t.payload.form_data.time_grain_sqla||t.payload.form_data.granularity||"P1D",{start:a,end:r,getStep:l,values:h,disabled:c}=Object(u.a)(s,n),{width:p,height:f,formData:v}=t;let{viewport:_}=t;return v.autozoom&&(_=Object(m.a)(_,{width:p,height:f,points:t.getPoints(i)})),_.zoom<0&&(_.zoom=0),{start:a,end:r,getStep:l,values:h,disabled:c,viewport:_,selected:[],lastClick:0,formData:t.payload.form_data,categories:o}}getLayers(t){const{getLayer:e,payload:i,formData:s,onAddFilter:o}=this.props;let n=i.data.features?[...i.data.features]:[];if(n=this.addColor(n,s),s.js_data_mutator){n=Object(f.a)(s.js_data_mutator)(n)}n=t[0]===t[1]||t[1]===this.end?n.filter(e=>e.__timestamp>=t[0]&&e.__timestamp<=t[1]):n.filter(e=>e.__timestamp>=t[0]&&e.__timestamp<t[1]);const a=this.state.categories;return s.dimension&&(n=n.filter(t=>a[t.cat_color]&&a[t.cat_color].enabled)),[e(s,g({},i,{data:g({},i.data,{features:n})}),o,this.setTooltip)]}addColor(t,e){const i=e.color_picker||{r:0,g:0,b:0,a:1},s=y(e.color_scheme);return t.map(t=>{let o;return e.dimension?(o=Object(d.hexToRGB)(s(t.cat_color),255*i.a),g({},t,{color:o})):t})}toggleCategory(t){const e=this.state.categories[t],i=g({},this.state.categories,{[t]:g({},e,{enabled:!e.enabled})});Object.values(i).every(t=>!t.enabled)&&Object.values(i).forEach(t=>{t.enabled=!0}),this.setState({categories:i})}showSingleCategory(t){const e=g({},this.state.categories);Object.values(e).forEach(t=>{t.enabled=!1}),e[t].enabled=!0,this.setState({categories:e})}render(){return o.a.createElement("div",{style:{position:"relative"}},o.a.createElement(c.a,{ref:this.containerRef,getLayers:this.getLayers,start:this.state.start,end:this.state.end,getStep:this.state.getStep,values:this.state.values,disabled:this.state.disabled,viewport:this.state.viewport,mapboxApiAccessToken:this.props.mapboxApiKey,mapStyle:this.props.formData.mapbox_style,setControlValue:this.props.setControlValue,width:this.props.width,height:this.props.height},o.a.createElement(p.a,{categories:this.state.categories,toggleCategory:this.toggleCategory,showSingleCategory:this.showSingleCategory,position:this.props.formData.legend_position,format:this.props.formData.legend_format})))}}function w(){return(w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}).apply(this,arguments)}function P(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}b.propTypes=_;const x={formData:a.a.object.isRequired,payload:a.a.object.isRequired,setControlValue:a.a.func.isRequired,viewport:a.a.object.isRequired,onAddFilter:a.a.func,width:a.a.number.isRequired,height:a.a.number.isRequired},C={onAddFilter(){}};function E(t,e){class i extends o.a.PureComponent{constructor(t){super(t),P(this,"containerRef",o.a.createRef()),P(this,"setTooltip",t=>{const{current:e}=this.containerRef;e&&e.setTooltip(t)});const{width:i,height:s,formData:n}=t;let{viewport:a}=t;n.autozoom&&(a=Object(m.a)(a,{width:i,height:s,points:e(t.payload.data.features)})),this.state={viewport:a,layer:this.computeLayer(t)},this.onViewportChange=this.onViewportChange.bind(this)}UNSAFE_componentWillReceiveProps(t){const e=w({},t.formData,{viewport:null}),i=w({},this.props.formData,{viewport:null});Object(r.isEqual)(e,i)&&t.payload===this.props.payload||this.setState({layer:this.computeLayer(t)})}onViewportChange(t){this.setState({viewport:t})}computeLayer(e){const{formData:i,payload:s,onAddFilter:o}=e;return t(i,s,o,this.setTooltip)}render(){const{formData:t,payload:e,setControlValue:i,height:s,width:n}=this.props,{layer:a,viewport:r}=this.state;return o.a.createElement(l.a,{ref:this.containerRef,mapboxApiAccessToken:e.data.mapboxApiKey,viewport:r,layers:[a],mapStyle:t.mapbox_style,setControlValue:i,width:n,height:s,onViewportChange:this.onViewportChange})}}return i.propTypes=x,i.defaultProps=C,i}function k(t,e){function i(i){const{formData:s,payload:n,setControlValue:a,viewport:r,width:l,height:h}=i;return o.a.createElement(b,{formData:s,mapboxApiKey:n.data.mapboxApiKey,setControlValue:a,viewport:r,getLayer:t,payload:n,getPoints:e,width:l,height:h})}return i.propTypes=x,i.defaultProps=C,i}},4661:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var s=i(0),o=i.n(s),n=i(2),a=i.n(n),r=i(302);i(4662);const l={categories:a.a.object,toggleCategory:a.a.func,showSingleCategory:a.a.func,format:a.a.string,position:a.a.oneOf([null,"tl","tr","bl","br"])};class h extends o.a.PureComponent{format(t){if(!this.props.format)return t;const e=parseFloat(t);return Object(r.b)(this.props.format,e)}formatCategoryLabel(t){if(!this.props.format)return t;if(t.includes(" - ")){const e=t.split(" - ");return this.format(e[0])+" - "+this.format(e[1])}return this.format(t)}render(){if(0===Object.keys(this.props.categories).length||null===this.props.position)return null;const t=Object.entries(this.props.categories).map(t=>{let[e,i]=t;const s={color:"rgba("+i.color.join(", ")+")"},n=i.enabled?"":"";return o.a.createElement("li",{key:e},o.a.createElement("a",{href:"#",onClick:()=>this.props.toggleCategory(e),onDoubleClick:()=>this.props.showSingleCategory(e)},o.a.createElement("span",{style:s},n)," ",this.formatCategoryLabel(e)))}),e={position:"absolute",["t"===this.props.position.charAt(0)?"top":"bottom"]:"0px",["r"===this.props.position.charAt(1)?"right":"left"]:"10px"};return o.a.createElement("div",{className:"legend",style:e},o.a.createElement("ul",{className:"categories"},t))}}h.propTypes=l,h.defaultProps={categories:{},toggleCategory:()=>{},showSingleCategory:()=>{},format:null,position:"tr"}},4662:function(t,e,i){},4698:function(t,e,i){"use strict";i.d(e,"a",(function(){return m}));var s=i(4717),o=i(4802),n=i(4837),a=i(4653),r=i(4992),l=i(4803),h=i(4757),c=i(4645);class p extends h.a{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):()=>null}normalizeGeometry(t){return this.normalize?function(t,e,i,s){let o=t;if(Array.isArray(t[0])){const i=t.length*e;o=new Array(i);for(let i=0;i<t.length;i++)for(let s=0;s<e;s++)o[i*e+s]=t[i][s]||0}return i?Object(c.d)(o,{size:e,gridResolution:i}):s?Object(c.e)(o,{size:e}):o}(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}get(t){return this.attributes[t]}getGeometrySize(t){if(Array.isArray(t[0])){let e=0;for(const i of t)e+=this.getGeometrySize(i);return e}const e=this.getPathLength(t);return e<2?0:this.isClosed(t)?e<3?0:e+2:e}updateGeometryAttributes(t,e){if(0!==e.geometrySize)if(t&&Array.isArray(t[0]))for(const i of t){const t=this.getGeometrySize(i);e.geometrySize=t,this.updateGeometryAttributes(i,e),e.vertexStart+=t}else this._updateSegmentTypes(t,e),this._updatePositions(t,e)}_updateSegmentTypes(t,e){const{segmentTypes:i}=this.attributes,s=this.isClosed(t),{vertexStart:o,geometrySize:n}=e;i.fill(0,o,o+n),s?(i[o]=4,i[o+n-2]=4):(i[o]+=1,i[o+n-2]+=2),i[o+n-1]=4}_updatePositions(t,e){const{positions:i}=this.attributes;if(!i)return;const{vertexStart:s,geometrySize:o}=e,n=new Array(3);for(let e=s,a=0;a<o;e++,a++)this.getPointOnPath(t,a,n),i[3*e]=n[0],i[3*e+1]=n[1],i[3*e+2]=n[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,e,i=[]){const{positionSize:s}=this;e*s>=t.length&&(e+=1-t.length/s);const o=e*s;return i[0]=t[o],i[1]=t[o+1],i[2]=3===s&&t[o+2]||0,i}isClosed(t){if(!this.normalize)return this.opts.loop;const{positionSize:e}=this,i=t.length-e;return t[0]===t[i]&&t[1]===t[i+1]&&(2===e||t[2]===t[i+2])}}const d=[0,0,0,255],u={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:d},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},f={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class m extends s.a{getShaders(){return super.getShaders({vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\n    vJointType = capType;\n  } else {\n    vJointType = jointType;\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return currPoint + offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.worldPosition = instanceStartPositions;\n  geometry.worldPositionAlt = instanceEndPositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec2 widthPixels = vec2(clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition, width.xy),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[o.a,n.a]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:f,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:f,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:f,defaultValue:d},instancePickingColors:{size:3,type:5121,accessor:(t,{index:e,target:i})=>this.encodePickingColor(t&&t.__source?t.__source.index:e,i)}}),this.setState({pathTesselator:new p({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&a.a.removed("getDashArray","PathStyleExtension")()}updateState({oldProps:t,props:e,changeFlags:i}){super.updateState({props:e,oldProps:t,changeFlags:i});const s=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){const{pathTesselator:t}=this.state,o=e.data.attributes||{};t.updateGeometry({data:e.data,geometryBuffer:o.getPath,buffers:o,normalize:!e._pathType,loop:"loop"===e._pathType,getGeometry:e.getPath,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:i.dataChanged}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),i.dataChanged||s.invalidateAll()}if(i.extensionsChanged){var o;const{gl:t}=this.context;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(t),s.invalidateAll()}}getPickingInfo(t){const e=super.getPickingInfo(t),{index:i}=e,{data:s}=this.props;return s[0]&&s[0].__source&&(e.object=s.find(t=>t.__source.index===i)),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let i=0;i<e.length;i++)e[i].__source.index===t&&this._disablePickingIndex(i);else this._disablePickingIndex(t)}draw({uniforms:t}){const{viewport:e}=this.context,{jointRounded:i,capRounded:s,billboard:o,miterLimit:n,widthUnits:a,widthScale:r,widthMinPixels:l,widthMaxPixels:h}=this.props,c="pixels"===a?e.metersPerPixel:1;this.state.model.setUniforms(t).setUniforms({jointType:Number(i),capType:Number(s),billboard:o,widthScale:r*c,miterLimit:n,widthMinPixels:l,widthMaxPixels:h}).draw()}_getModel(t){return new r.a(t,{...this.getShaders(),id:this.props.id,geometry:new l.a({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateSegmentTypes(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("segmentTypes")}}m.layerName="PathLayer",m.defaultProps=u},4757:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var s=i(4692),o=i(4686),n=i(4671),a=i(4689);class r{constructor(t={}){const{attributes:e={}}=t;this.typedArrayManager=o.a,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=e,this.opts=t,this.updateGeometry(t),Object.seal(this)}updateGeometry(t){Object.assign(this.opts,t);const{data:e,buffers:i={},getGeometry:s,geometryBuffer:o,positionFormat:a,dataChanged:r,normalize:l=!0}=this.opts;if(this.data=e,this.getGeometry=s,this.positionSize=o&&o.size||("XY"===a?2:3),this.buffers=i,this.normalize=l,o&&(Object(n.a)(e.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),l||(i.positions=o)),this.geometryBuffer=i.positions,Array.isArray(r))for(const t of r)this._rebuildGeometry(t);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:e}){this._rebuildGeometry({startRow:t,endRow:e})}normalizeGeometry(t){return t}updateGeometryAttributes(t,e,i){throw new Error("Not implemented")}getGeometrySize(t){throw new Error("Not implemented")}getGeometryFromBuffer(t){const e=t.value||t;return Object(n.a)(ArrayBuffer.isView(e)),Object(s.b)(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices})}_allocate(t,e){const{attributes:i,buffers:s,_attributeDefs:o,typedArrayManager:n}=this;for(const a in o)if(a in s)n.release(i[a]),i[a]=null;else{const s=o[a];s.copy=e,i[a]=n.allocate(i[a],t,s)}}_forEachGeometry(t,e,i){const{data:o,getGeometry:n}=this,{iterable:a,objectInfo:r}=Object(s.a)(o,e,i);for(const e of a){r.index++,t(n(e,r),r.index)}}_rebuildGeometry(t){if(!this.data||!this.getGeometry)return;let{indexStarts:e,vertexStarts:i,instanceCount:s}=this;const{data:o,geometryBuffer:n}=this,{startRow:r=0,endRow:l=1/0}=t||{},h={};if(t||(e=[0],i=[0]),this.normalize||!n)this._forEachGeometry((t,e)=>{t=this.normalizeGeometry(t),h[e]=t,i[e+1]=i[e]+this.getGeometrySize(t)},r,l),s=i[i.length-1];else if(n.buffer instanceof a.a){const t=n.stride||4*this.positionSize;i=o.startIndices,s=i[o.length]||n.buffer.byteLength/t}else{const t=n.value||n,e=n.stride/t.BYTES_PER_ELEMENT||this.positionSize;i=o.startIndices,s=i[o.length]||t.length/e}this._allocate(s,Boolean(t)),this.indexStarts=e,this.vertexStarts=i,this.instanceCount=s;const c={};this._forEachGeometry((t,o)=>{t=h[o]||t,c.vertexStart=i[o],c.indexStart=e[o];const n=o<i.length-1?i[o+1]:s;c.geometrySize=n-i[o],c.geometryIndex=o,this.updateGeometryAttributes(t,c)},r,l),this.vertexCount=e[e.length-1]}}},4804:function(t,e,i){"use strict";i.r(e),i.d(e,"getLayer",(function(){return d}));var s=i(4698),o=i(0),n=i.n(o),a=i(4650),r=i(4643),l=i(4659),h=i(4651);function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}).apply(this,arguments)}function p(t){return t.object.extraProps&&n.a.createElement("div",{className:"deckgl-tooltip"},Object.keys(t.object.extraProps).map((e,i)=>n.a.createElement(h.a,{key:"prop-"+i,label:e+": ",value:""+t.object.extraProps[e]})))}function d(t,e,i,o){const n=t,l=n.color_picker,h=[l.r,l.g,l.b,255*l.a];let d=e.data.features.map(t=>c({},t,{path:t.path,width:n.line_width,color:h}));if(n.js_data_mutator){d=Object(r.a)(n.js_data_mutator)(d)}return new s.a(c({id:"path-layer-"+n.slice_id,getColor:t=>t.color,getPath:t=>t.path,getWidth:t=>t.width,data:d,rounded:!0,widthScale:1},Object(a.a)(n,o,p)))}e.default=Object(l.b)(d,(function(t){let e=[];return t.forEach(t=>{e=e.concat(t.path)}),e}))}}]);