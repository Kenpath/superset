/*! For license information please see 9dea9f73c0d16873b574.chunk.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{1685:function(t,e,i){var n;!function(s,o,r){if(s){for(var a,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},h={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},p={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},d=1;d<20;++d)l[111+d]="f"+d;for(d=0;d<=9;++d)l[d+96]=d.toString();y.prototype.bind=function(t,e,i){return t=t instanceof Array?t:[t],this._bindMultiple.call(this,t,e,i),this},y.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},y.prototype.trigger=function(t,e){return this._directMap[t+":"+e]&&this._directMap[t+":"+e]({},t),this},y.prototype.reset=function(){return this._callbacks={},this._directMap={},this},y.prototype.stopCallback=function(t,e){return!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&(!function t(e,i){return null!==e&&e!==o&&(e===i||t(e.parentNode,i))}(e,this.target)&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable))},y.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},y.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(l[e]=t[e]);a=null},y.init=function(){var t=y(o);for(var e in t)"_"!==e.charAt(0)&&(y[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},y.init(),s.Mousetrap=y,t.exports&&(t.exports=y),void 0===(n=function(){return y}.call(e,i,e,t))||(t.exports=n)}function u(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)}function g(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return l[t.which]?l[t.which]:h[t.which]?h[t.which]:String.fromCharCode(t.which).toLowerCase()}function f(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function m(t,e,i){return i||(i=function(){if(!a)for(var t in a={},l)t>95&&t<112||l.hasOwnProperty(t)&&(a[l[t]]=t);return a}()[t]?"keydown":"keypress"),"keypress"==i&&e.length&&(i="keydown"),i}function v(t,e){var i,n,s,o=[];for(i=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),s=0;s<i.length;++s)n=i[s],p[n]&&(n=p[n]),e&&"keypress"!=e&&c[n]&&(n=c[n],o.push("shift")),f(n)&&o.push(n);return{key:n,modifiers:o,action:e=m(n,o,e)}}function y(t){var e=this;if(t=t||o,!(e instanceof y))return new y(t);e.target=t,e._callbacks={},e._directMap={};var i,n={},s=!1,r=!1,a=!1;function l(t){t=t||{};var e,i=!1;for(e in n)t[e]?i=!0:n[e]=0;i||(a=!1)}function h(t,i,s,o,r,a){var l,h,c,p,d=[],u=s.type;if(!e._callbacks[t])return[];for("keyup"==u&&f(t)&&(i=[t]),l=0;l<e._callbacks[t].length;++l)if(h=e._callbacks[t][l],(o||!h.seq||n[h.seq]==h.level)&&u==h.action&&("keypress"==u&&!s.metaKey&&!s.ctrlKey||(c=i,p=h.modifiers,c.sort().join(",")===p.sort().join(",")))){var g=!o&&h.combo==r,m=o&&h.seq==o&&h.level==a;(g||m)&&e._callbacks[t].splice(l,1),d.push(h)}return d}function c(t,i,n,s){e.stopCallback(i,i.target||i.srcElement,n,s)||!1===t(i,n)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(i),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(i))}function p(t){"number"!=typeof t.which&&(t.which=t.keyCode);var i=g(t);i&&("keyup"!=t.type||s!==i?e.handleKey(i,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):s=!1)}function d(t,e,o,r){function h(e){return function(){a=e,++n[t],clearTimeout(i),i=setTimeout(l,1e3)}}function p(e){c(o,e,t),"keyup"!==r&&(s=g(e)),setTimeout(l,10)}n[t]=0;for(var d=0;d<e.length;++d){var u=d+1===e.length?p:h(r||v(e[d+1]).action);m(e[d],u,r,t,d)}}function m(t,i,n,s,o){e._directMap[t+":"+n]=i;var r,a=(t=t.replace(/\s+/g," ")).split(" ");a.length>1?d(t,a,i,n):(r=v(t,n),e._callbacks[r.key]=e._callbacks[r.key]||[],h(r.key,r.modifiers,{type:r.action},s,t,o),e._callbacks[r.key][s?"unshift":"push"]({callback:i,modifiers:r.modifiers,action:r.action,seq:s,level:o,combo:t}))}e._handleKey=function(t,e,i){var n,s=h(t,e,i),o={},p=0,d=!1;for(n=0;n<s.length;++n)s[n].seq&&(p=Math.max(p,s[n].level));for(n=0;n<s.length;++n)if(s[n].seq){if(s[n].level!=p)continue;d=!0,o[s[n].seq]=1,c(s[n].callback,i,s[n].combo,s[n].seq)}else d||c(s[n].callback,i,s[n].combo);var u="keypress"==i.type&&r;i.type!=a||f(t)||u||l(o),r=d&&"keydown"==i.type},e._bindMultiple=function(t,e,i){for(var n=0;n<t.length;++n)m(t[n],e,i)},u(t,"keypress",p),u(t,"keydown",p),u(t,"keyup",p)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},4640:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(4644),s=i(167);const o=[-90,90],r=[-180,180];function a(t,e,i){let[n,s]=t,[o,r]=e;return void 0===i&&(i=.25),n<s?[n,s]:[Math.max(o,n-i),Math.min(r,s+i)]}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function h(t,e){let{points:i,width:h,height:c,minExtent:p,maxZoom:d,offset:u,padding:g=20}=e;const{bearing:f,pitch:m}=t,v=function(t){const e=a(Object(s.extent)(t,t=>t[1]),o),i=a(Object(s.extent)(t,t=>t[0]),r);return[[i[0],e[0]],[i[1],e[1]]]}(i);try{return l({},Object(n.c)({bounds:v,width:h,height:c,minExtent:p,maxZoom:d,offset:u,padding:g}),{bearing:f,pitch:m})}catch(t){console.error("Could not fit viewport",t)}return t}},4645:function(t,e,i){"use strict";i.d(e,"f",(function(){return s})),i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return u})),i.d(e,"d",(function(){return p})),i.d(e,"e",(function(){return y})),i.d(e,"c",(function(){return _}));i(4637);const n={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function s(t,e,i={}){return function(t,e={}){return Math.sign(o(t,e))}(t,i)!==e&&(function(t,e){const{start:i=0,end:n=t.length,size:s=2}=e,o=(n-i)/s,r=Math.floor(o/2);for(let e=0;e<r;++e){const n=i+e*s,r=i+(o-1-e)*s;for(let e=0;e<s;++e){const i=t[n+e];t[n+e]=t[r+e],t[r+e]=i}}}(t,i),!0)}function o(t,e={}){const{start:i=0,end:n=t.length}=e,s=e.size||2;let o=0;for(let e=i,r=n-s;e<n;e+=s)o+=(t[e]-t[r])*(t[e+1]+t[r+1]),r=e;return o/2}function r(t,e){const i=e.length,n=t.length;if(n>0){let s=!0;for(let o=0;o<i;o++)if(t[n-i+o]!==e[o]){s=!1;break}if(s)return!1}for(let s=0;s<i;s++)t[n+s]=e[s];return!0}function a(t,e){const i=e.length;for(let n=0;n<i;n++)t[n]=e[n]}function l(t,e,i,n,s=[]){const o=n+e*i;for(let e=0;e<i;e++)s[e]=t[o+e];return s}function h(t,e,i,n,s=[]){let o,r;if(8&i)o=(n[3]-t[1])/(e[1]-t[1]),r=3;else if(4&i)o=(n[1]-t[1])/(e[1]-t[1]),r=1;else if(2&i)o=(n[2]-t[0])/(e[0]-t[0]),r=2;else{if(!(1&i))return null;o=(n[0]-t[0])/(e[0]-t[0]),r=0}for(let i=0;i<t.length;i++)s[i]=(1&r)===i?n[r]:o*(e[i]-t[i])+t[i];return s}function c(t,e){let i=0;return t[0]<e[0]?i|=1:t[0]>e[2]&&(i|=2),t[1]<e[1]?i|=4:t[1]>e[3]&&(i|=8),i}function p(t,e={}){const{size:i=2,broken:n=!1,gridResolution:s=10,gridOffset:o=[0,0],startIndex:p=0,endIndex:d=t.length}=e,u=(d-p)/i;let g=[];const v=[g],y=l(t,0,i,p);let _,b;const x=f(y,s,o,[]),C=[];r(g,y);for(let e=1;e<u;e++){for(_=l(t,e,i,p,_),b=c(_,x);b;){h(y,_,b,x,C);const t=c(C,x);t&&(h(y,C,t,x,C),b=t),r(g,C),a(y,C),m(x,s,b),n&&g.length>i&&(g=[],v.push(g),r(g,y)),b=c(_,x)}r(g,_),a(y,_)}return n?v:v[0]}function d(t,e){for(let i=0;i<e.length;i++)t.push(e[i]);return t}function u(t,e,i={}){if(!t.length)return[];const{size:n=2,gridResolution:s=10,gridOffset:o=[0,0],edgeTypes:r=!1}=i,a=[],l=[{pos:t,types:r&&new Array(t.length/n).fill(1),holes:e||[]}],h=[[],[]];let p=[];for(;l.length;){const{pos:t,types:e,holes:i}=l.shift();v(t,n,i[0]||t.length,h),p=f(h[0],s,o,p);const u=c(h[1],p);if(u){let s=g(t,e,n,0,i[0]||t.length,p,u);const o={pos:s[0].pos,types:s[0].types,holes:[]},a={pos:s[1].pos,types:s[1].types,holes:[]};l.push(o,a);for(let l=0;l<i.length;l++)s=g(t,e,n,i[l],i[l+1]||t.length,p,u),s[0]&&(o.holes.push(o.pos.length),o.pos=d(o.pos,s[0].pos),r&&(o.types=d(o.types,s[0].types))),s[1]&&(a.holes.push(a.pos.length),a.pos=d(a.pos,s[1].pos),r&&(a.types=d(a.types,s[1].types)))}else{const n={positions:t};r&&(n.edgeTypes=e),i.length&&(n.holeIndices=i),a.push(n)}}return a}function g(t,e,i,n,s,o,c){const p=(s-n)/i,d=[],u=[],g=[],f=[],m=[];let v,y,_;const b=l(t,p-1,i,n);let x=Math.sign(8&c?b[1]-o[3]:b[0]-o[2]),C=e&&e[p-1],P=0,w=0;for(let s=0;s<p;s++)v=l(t,s,i,n,v),y=Math.sign(8&c?v[1]-o[3]:v[0]-o[2]),_=e&&e[n/i+s],y&&x&&x!==y&&(h(b,v,c,o,m),r(d,m)&&g.push(C),r(u,m)&&f.push(C)),y<=0?(r(d,v)&&g.push(_),P-=y):g.length&&(g[g.length-1]=0),y>=0?(r(u,v)&&f.push(_),w+=y):f.length&&(f[f.length-1]=0),a(b,v),x=y,C=_;return[P?{pos:d,types:e&&g}:null,w?{pos:u,types:e&&f}:null]}function f(t,e,i,n){const s=Math.floor((t[0]-i[0])/e)*e+i[0],o=Math.floor((t[1]-i[1])/e)*e+i[1];return n[0]=s,n[1]=o,n[2]=s+e,n[3]=o+e,n}function m(t,e,i){8&i?(t[1]+=e,t[3]+=e):4&i?(t[1]-=e,t[3]-=e):2&i?(t[0]+=e,t[2]+=e):1&i&&(t[0]-=e,t[2]-=e)}function v(t,e,i,n){let s=1/0,o=-1/0,r=1/0,a=-1/0;for(let n=0;n<i;n+=e){const e=t[n],i=t[n+1];s=e<s?e:s,o=e>o?e:o,r=i<r?i:r,a=i>a?i:a}return n[0][0]=s,n[0][1]=r,n[1][0]=o,n[1][1]=a,n}function y(t,e={}){const{size:i=2,startIndex:n=0,endIndex:s=t.length,normalize:o=!0}=e,r=t.slice(n,s);C(r,i,0,s-n);const a=p(r,{size:i,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const t of a)P(t,i);return a}function _(t,e,i={}){const{size:n=2,normalize:s=!0,edgeTypes:o=!1}=i;e=e||[];const r=[],a=[];let l=0,h=0;for(let s=0;s<=e.length;s++){const o=e[s]||t.length,c=h,p=b(t,n,l,o);for(let e=p;e<o;e++)r[h++]=t[e];for(let e=l;e<p;e++)r[h++]=t[e];C(r,n,c,h),x(r,n,c,h,i.maxLatitude),l=o,a[s]=h}a.pop();const c=u(r,a,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(s)for(const t of c)P(t.positions,n);return c}function b(t,e,i,n){let s=-1,o=-1;for(let r=i+1;r<n;r+=e){const e=Math.abs(t[r]);e>s&&(s=e,o=r-1)}return o}function x(t,e,i,n,s=85.051129){const o=t[i],a=t[n-e];if(Math.abs(o-a)>180){const n=l(t,0,e,i);n[0]+=360*Math.round((a-o)/360),r(t,n),n[1]=Math.sign(n[1])*s,r(t,n),n[0]=o,r(t,n)}}function C(t,e,i,n){let s,o=t[0];for(let r=i;r<n;r+=e){s=t[r];const e=s-o;(e>180||e<-180)&&(s-=360*Math.round(e/360)),t[r]=o=s}}function P(t,e){let i;const n=t.length/e;for(let s=0;s<n&&(i=t[s*e],(i+180)%360==0);s++);const s=360*-Math.round(i/360);if(0!==s)for(let i=0;i<n;i++)t[i*e]+=s}},4646:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(37),s=i.n(n);const o=[1,0,1,0,0,0,0];function r(t,e){const i=parseInt(s()(e).format("x"),10);return parseInt(s()(e).add(t).format("x"),10)-i}function a(t,e){const i=s()(Number(t.reduce((t,e)=>t<e?t:e))),n=s()(Number(t.reduce((t,e)=>t>e?t:e)));let a,l,h;if(e.includes("/")){const t=e.split("/",2);t[0].endsWith("Z")?(l=s()(t[0]),a=s.a.duration(t[1])):(l=s()(t[1]),a=s.a.duration(t[0]))}else a=s.a.duration(e),l=function(t,e){const i=s()(t).subtract(e),n=t.toArray(),r=i.toArray(),a=n.map((t,e)=>r[e]!==t).indexOf(!0),l=n.map((t,e)=>{if(e===a){const i=t-r[e];return t-(t-o[e])%i}return e<a||-1===a?t:o[e]});return s()(l)}(i,a);const c=i.valueOf();for(h=l.clone();h.valueOf()<c;)h.add(a);for(;h.valueOf()>c;)h.subtract(a);let p;const d=n.valueOf();for(p=l.clone();p.valueOf()>d;)p.subtract(a);for(;p.valueOf()<d;)p.add(a);const u=null!=e?[h,h.clone().add(a)]:[h,p],g=t.every(t=>null===t);return{start:parseInt(h.format("x"),10),end:parseInt(p.format("x"),10),getStep:r.bind(this,a),values:u.map(t=>parseInt(t.format("x"),10)),disabled:g}}},4648:function(t,e,i){"use strict";i.d(e,"a",(function(){return y}));var n=i(0),s=i.n(n),o=i(2),r=i.n(o),a=i(4647),l=i(1685),h=i.n(l),c=i(13),p=i(4654),d=i.n(p);i(4656),i(4657);function u(t){return s.a.createElement("span",{className:"BootstrapSliderWrapper"},s.a.createElement(d.a,t))}i(4658);const g={start:r.a.number.isRequired,step:r.a.number.isRequired,end:r.a.number.isRequired,values:r.a.array.isRequired,onChange:r.a.func,loopDuration:r.a.number,maxFrames:r.a.number,orientation:r.a.oneOf(["horizontal","vertical"]),reversed:r.a.bool,disabled:r.a.bool,range:r.a.bool};class f extends s.a.PureComponent{constructor(t){super(t),this.state={intervalId:null};const e=t.end-t.start,i=Math.min(t.maxFrames,e/t.step),n=e/i;this.intervalMilliseconds=t.loopDuration/i,this.increment=n<t.step?t.step:n-n%t.step,this.onChange=this.onChange.bind(this),this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.stepBackward=this.stepBackward.bind(this),this.stepForward=this.stepForward.bind(this),this.getPlayClass=this.getPlayClass.bind(this),this.formatter=this.formatter.bind(this)}componentDidMount(){h.a.bind(["space"],this.play)}componentWillUnmount(){h.a.unbind(["space"])}onChange(t){this.props.onChange(t.target.value),null!=this.state.intervalId&&this.pause()}getPlayClass(){return null==this.state.intervalId?"fa fa-play fa-lg slider-button":"fa fa-pause fa-lg slider-button"}play(){if(!this.props.disabled)if(null!=this.state.intervalId)this.pause();else{const t=setInterval(this.stepForward,this.intervalMilliseconds);this.setState({intervalId:t})}}pause(){clearInterval(this.state.intervalId),this.setState({intervalId:null})}stepForward(){const{start:t,end:e,step:i,values:n,disabled:s}=this.props;if(s)return;const o=(Array.isArray(n)?n:[n,n+i]).map(t=>t+this.increment),r=o[1]>e?o[0]-t:0;this.props.onChange(o.map(t=>t-r))}stepBackward(){const{start:t,end:e,step:i,values:n,disabled:s}=this.props;if(s)return;const o=(Array.isArray(n)?n:[n,n+i]).map(t=>t-this.increment),r=o[0]<t?e-o[1]:0;this.props.onChange(o.map(t=>t+r))}formatter(t){if(this.props.disabled)return Object(c.e)("Data has no time steps");let e=t;return Array.isArray(t)?t[0]===t[1]&&(e=[t[0]]):e=[t],e.map(t=>new Date(t).toUTCString()).join(" : ")}render(){const{start:t,end:e,step:i,orientation:n,reversed:o,disabled:r,range:a,values:l}=this.props;return s.a.createElement("div",{className:"play-slider"},s.a.createElement("div",{className:"play-slider-controls padded"},s.a.createElement("i",{className:"fa fa-step-backward fa-lg slider-button ",onClick:this.stepBackward}),s.a.createElement("i",{className:this.getPlayClass(),onClick:this.play}),s.a.createElement("i",{className:"fa fa-step-forward fa-lg slider-button ",onClick:this.stepForward})),s.a.createElement("div",{className:"play-slider-scrobbler padded"},s.a.createElement(u,{value:a?l:l[0],range:a,formatter:this.formatter,change:this.onChange,min:t,max:e,step:i,orientation:n,reversed:o,disabled:r?"disabled":"enabled"})))}}function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}f.propTypes=g,f.defaultProps={onChange:()=>{},loopDuration:15e3,maxFrames:100,orientation:"horizontal",reversed:!1,disabled:!1,range:!0};const v={getLayers:r.a.func.isRequired,start:r.a.number.isRequired,end:r.a.number.isRequired,getStep:r.a.func,values:r.a.array.isRequired,aggregation:r.a.bool,disabled:r.a.bool,viewport:r.a.object.isRequired,children:r.a.node,mapStyle:r.a.string,mapboxApiAccessToken:r.a.string.isRequired,setControlValue:r.a.func,onValuesChange:r.a.func,width:r.a.number.isRequired,height:r.a.number.isRequired};class y extends s.a.PureComponent{constructor(){super(...arguments),m(this,"containerRef",s.a.createRef()),m(this,"setTooltip",t=>{const{current:e}=this.containerRef;e&&e.setTooltip(t)})}render(){const{start:t,end:e,getStep:i,disabled:n,aggregation:o,children:r,getLayers:l,values:h,onValuesChange:c,viewport:p,setControlValue:d,mapStyle:u,mapboxApiAccessToken:g,height:m,width:v}=this.props,y=l(h);return s.a.createElement("div",null,s.a.createElement(a.a,{ref:this.containerRef,viewport:p,layers:y,setControlValue:d,mapStyle:u,mapboxApiAccessToken:g,bottomMargin:n?0:20,width:v,height:m}),!n&&s.a.createElement(f,{start:t,end:e,step:i(t),values:h,range:!o,onChange:c}),r)}}y.propTypes=v,y.defaultProps={aggregation:!1,disabled:!1,mapStyle:"light",setControlValue:()=>{},onValuesChange:()=>{}}},4654:function(t,e,i){var n,s,o;s=[e,i(90),i(217),i(265),i(255),i(256),i(0),i(2),i(4655)],void 0===(o="function"==typeof(n=function(t,e,i,n,s,o,r,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactBootstrapSlider=void 0;var h=v(e),c=v(i),p=v(n),d=v(s),u=v(o),g=v(r),f=v(a),m=v(l);function v(t){return t&&t.__esModule?t:{default:t}}var y=t.ReactBootstrapSlider=function(t){function e(){var t,i,n,s;(0,c.default)(this,e);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];return i=n=(0,d.default)(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(r))),n.checkAndDoDisabled=function(){var t="disabled"!==n.props.disabled,e=n.mySlider.isEnabled();t?e||n.mySlider.enable():e&&n.mySlider.disable()},n.updateSliderValues=function(){void 0===n.props.min||void 0===n.mySlider.min&&void 0===n.mySlider.options.min||n.mySlider.setAttribute("min",n.props.min),void 0===n.props.max||void 0===n.mySlider.max&&void 0===n.mySlider.options.max||n.mySlider.setAttribute("max",n.props.max),void 0===n.props.step||void 0===n.mySlider.step&&void 0===n.mySlider.options.step||n.mySlider.setAttribute("step",n.props.step),n.mySlider.setValue(n.props.value),n.checkAndDoDisabled()},s=i,(0,d.default)(n,s)}return(0,u.default)(e,t),(0,p.default)(e,[{key:"componentDidMount",value:function(){var t=this,e=(0,h.default)({},this.props,{tooltip:this.props.tooltip||"show"});if(this.mySlider=new m.default(this.node,e),this.props.change||this.props.handleChange){var i=this.props.change||this.props.handleChange;this.mySlider.on("change",(function(t){var e={target:{}};e.target.value=t.newValue,i(e)}))}this.props.slideStop&&this.mySlider.on("slideStop",(function(e){var i={target:{}};i.target.value=e,t.props.slideStop(i)})),this.checkAndDoDisabled()}},{key:"componentDidUpdate",value:function(){this.updateSliderValues()}},{key:"componentWillUnmount",value:function(){this.mySlider.destroy()}},{key:"render",value:function(){var t=this;return g.default.createElement("div",{ref:function(e){return t.node=e}})}}]),e}(g.default.Component);y.propTypes={min:f.default.number,max:f.default.number,step:f.default.number,value:f.default.oneOfType([f.default.number,f.default.arrayOf(f.default.number.isRequired).isRequired]).isRequired,disabled:f.default.string,tooltip:f.default.string,change:f.default.func,handleChange:f.default.func,slideStop:f.default.func,labelledby:f.default.oneOfType([f.default.string,f.default.arrayOf(f.default.string)])},t.default=y})?n.apply(e,s):n)||(t.exports=o)},4655:function(t,e,i){"use strict";var n,s,o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a="object"===("undefined"==typeof window?"undefined":r(window));s=[i(107)],void 0===(o="function"==typeof(n=function(t){var e;return a&&!window.console&&(window.console={}),a&&!window.console.log&&(window.console.log=function(){}),a&&!window.console.warn&&(window.console.warn=function(){}),function(t){var e=Array.prototype.slice;function i(){}!function(t){if(t){var n="undefined"==typeof console?i:function(t){console.error(t)};t.bridget=function(i,s){!function(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}(s),function(i,s){t.fn[i]=function(o){if("string"==typeof o){for(var r=e.call(arguments,1),a=0,l=this.length;a<l;a++){var h=this[a],c=t.data(h,i);if(c)if(t.isFunction(c[o])&&"_"!==o.charAt(0)){var p=c[o].apply(c,r);if(void 0!==p&&p!==c)return p}else n("no such method '"+o+"' for "+i+" instance");else n("cannot call methods on "+i+" prior to initialization; attempted to call '"+o+"'")}return this}var d=this.map((function(){var e=t.data(this,i);return e?(e.option(o),e._init()):(e=new s(this,o),t.data(this,i,e)),t(this)}));return!d||d.length>1?d:d[0]}}(i,s)},t.bridget}}(t)}(t),function(t){var i=function(t){return"Invalid input value '"+t+"' passed in"},n={linear:{toValue:function(t){var e=t/100*(this.options.max-this.options.min),i=!0;if(this.options.ticks_positions.length>0){for(var n,s,o,r=0,a=1;a<this.options.ticks_positions.length;a++)if(t<=this.options.ticks_positions[a]){n=this.options.ticks[a-1],o=this.options.ticks_positions[a-1],s=this.options.ticks[a],r=this.options.ticks_positions[a];break}e=n+(t-o)/(r-o)*(s-n),i=!1}var l=(i?this.options.min:0)+Math.round(e/this.options.step)*this.options.step;return l<this.options.min?this.options.min:l>this.options.max?this.options.max:l},toPercentage:function(t){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var e,i,n,s=0,o=0;o<this.options.ticks.length;o++)if(t<=this.options.ticks[o]){e=o>0?this.options.ticks[o-1]:0,n=o>0?this.options.ticks_positions[o-1]:0,i=this.options.ticks[o],s=this.options.ticks_positions[o];break}if(o>0)return n+(t-e)/(i-e)*(s-n)}return 100*(t-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(t){var e=0===this.options.min?0:Math.log(this.options.min),i=Math.log(this.options.max),n=Math.exp(e+(i-e)*t/100);return Math.round(n)===this.options.max?this.options.max:(n=this.options.min+Math.round((n-this.options.min)/this.options.step)*this.options.step)<this.options.min?this.options.min:n>this.options.max?this.options.max:n},toPercentage:function(t){if(this.options.max===this.options.min)return 0;var e=Math.log(this.options.max),i=0===this.options.min?0:Math.log(this.options.min);return 100*((0===t?0:Math.log(t))-i)/(e-i)}}};function s(e,i){this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},this.ticksCallbackMap={},this.handleCallbackMap={},"string"==typeof e?this.element=document.querySelector(e):e instanceof HTMLElement&&(this.element=e),i=i||{};for(var s=Object.keys(this.defaultOptions),o=0;o<s.length;o++){var r=s[o],a=i[r];a=null!==(a=void 0!==a?a:l(this.element,r))?a:this.defaultOptions[r],this.options||(this.options={}),this.options[r]=a}function l(t,e){var i="data-slider-"+e.replace(/_/g,"-"),n=t.getAttribute(i);try{return JSON.parse(n)}catch(t){return n}}"auto"===this.options.rtl&&(this.options.rtl="rtl"===window.getComputedStyle(this.element).direction),"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.rtl?this.options.tooltip_position="left":this.options.tooltip_position="right";var h,c,p,d,u,g=this.element.style.width,f=!1,m=this.element.parentNode;if(this.sliderElem)f=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var v=document.createElement("div");v.className="slider-track",(c=document.createElement("div")).className="slider-track-low",(h=document.createElement("div")).className="slider-selection",(p=document.createElement("div")).className="slider-track-high",(d=document.createElement("div")).className="slider-handle min-slider-handle",d.setAttribute("role","slider"),d.setAttribute("aria-valuemin",this.options.min),d.setAttribute("aria-valuemax",this.options.max),(u=document.createElement("div")).className="slider-handle max-slider-handle",u.setAttribute("role","slider"),u.setAttribute("aria-valuemin",this.options.min),u.setAttribute("aria-valuemax",this.options.max),v.appendChild(c),v.appendChild(h),v.appendChild(p),this.rangeHighlightElements=[];var y=this.options.rangeHighlights;if(Array.isArray(y)&&y.length>0)for(var _=0;_<y.length;_++){var b=document.createElement("div"),x=y[_].class||"";b.className="slider-rangeHighlight slider-selection "+x,this.rangeHighlightElements.push(b),v.appendChild(b)}var C=Array.isArray(this.options.labelledby);if(C&&this.options.labelledby[0]&&d.setAttribute("aria-labelledby",this.options.labelledby[0]),C&&this.options.labelledby[1]&&u.setAttribute("aria-labelledby",this.options.labelledby[1]),!C&&this.options.labelledby&&(d.setAttribute("aria-labelledby",this.options.labelledby),u.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(this.ticksContainer=document.createElement("div"),this.ticksContainer.className="slider-tick-container",o=0;o<this.options.ticks.length;o++){var P=document.createElement("div");if(P.className="slider-tick",this.options.ticks_tooltip){var w=this._addTickListener(),L=w.addMouseEnter(this,P,o),E=w.addMouseLeave(this,P);this.ticksCallbackMap[o]={mouseEnter:L,mouseLeave:E}}this.ticks.push(P),this.ticksContainer.appendChild(P)}h.className+=" tick-slider-selection"}if(this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",o=0;o<this.options.ticks_labels.length;o++){var S=document.createElement("div"),k=0===this.options.ticks_positions.length,A=this.options.reversed&&k?this.options.ticks_labels.length-(o+1):o;S.className="slider-tick-label",S.innerHTML=this.options.ticks_labels[A],this.tickLabels.push(S),this.tickLabelContainer.appendChild(S)}var T=function(t){var e=document.createElement("div");e.className="tooltip-arrow";var i=document.createElement("div");i.className="tooltip-inner",t.appendChild(e),t.appendChild(i)},M=document.createElement("div");M.className="tooltip tooltip-main",M.setAttribute("role","presentation"),T(M);var z=document.createElement("div");z.className="tooltip tooltip-min",z.setAttribute("role","presentation"),T(z);var O=document.createElement("div");O.className="tooltip tooltip-max",O.setAttribute("role","presentation"),T(O),this.sliderElem.appendChild(v),this.sliderElem.appendChild(M),this.sliderElem.appendChild(z),this.sliderElem.appendChild(O),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),this.ticksContainer&&this.sliderElem.appendChild(this.ticksContainer),this.sliderElem.appendChild(d),this.sliderElem.appendChild(u),m.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(t&&(this.$element=t(this.element),this.$sliderElem=t(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.touchX=0,this.touchY=0,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),n[this.options.scale]&&(this.options.scale=n[this.options.scale]),!0===f&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.sliderElem,"slider-rtl"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","right","top","width","height"].forEach((function(t){this._removeProperty(this.trackLow,t),this._removeProperty(this.trackSelection,t),this._removeProperty(this.trackHigh,t)}),this),[this.handle1,this.handle2].forEach((function(t){this._removeProperty(t,"left"),this._removeProperty(t,"right"),this._removeProperty(t,"top")}),this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach((function(t){this._removeProperty(t,"left"),this._removeProperty(t,"right"),this._removeProperty(t,"top"),this._removeProperty(t,"margin-left"),this._removeProperty(t,"margin-right"),this._removeProperty(t,"margin-top"),this._removeClass(t,"right"),this._removeClass(t,"left"),this._removeClass(t,"top")}),this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=g,this.options.orientation="horizontal",this.options.rtl?this.stylePos="right":this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this.options.rtl&&this._addClass(this.sliderElem,"slider-rtl"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this.options.range?this._state.value=[this.options.value,this.options.max]:this._state.value=this.options.value,this.trackLow=c||this.trackLow,this.trackSelection=h||this.trackSelection,this.trackHigh=p||this.trackHigh,"none"===this.options.selection?(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")):"after"!==this.options.selection&&"before"!==this.options.selection||(this._removeClass(this.trackLow,"hide"),this._removeClass(this.trackSelection,"hide"),this._removeClass(this.trackHigh,"hide")),this.handle1=d||this.handle1,this.handle2=u||this.handle2,!0===f)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),o=0;o<this.ticks.length;o++)this._removeClass(this.ticks[o],"round triangle hide");if(-1!==["round","triangle","custom"].indexOf(this.options.handle))for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),o=0;o<this.ticks.length;o++)this._addClass(this.ticks[o],this.options.handle);if(this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchstart=this._touchstart.bind(this),this.touchmove=this._touchmove.bind(this),this.touchCapable){var I=!1;try{var R=Object.defineProperty({},"passive",{get:function(){I=!0}});window.addEventListener("test",null,R)}catch(t){}var D=!!I&&{passive:!0};this.sliderElem.addEventListener("touchstart",this.touchstart,D),this.sliderElem.addEventListener("touchmove",this.touchmove,D)}if(this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip)this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide");else if("always"===this.options.tooltip)this._showTooltip(),this._alwaysShowTooltip=!0;else{if(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.options.ticks_tooltip){var F=this._addTickListener(),N=F.addMouseEnter(this,this.handle1),j=F.addMouseLeave(this,this.handle1);this.handleCallbackMap.handle1={mouseEnter:N,mouseLeave:j},N=F.addMouseEnter(this,this.handle2),j=F.addMouseLeave(this,this.handle2),this.handleCallbackMap.handle2={mouseEnter:N,mouseLeave:j}}else this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1);this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)}this.options.enabled?this.enable():this.disable()}if((e=function(t,e){return s.call(this,t,e),this}).prototype={_init:function(){},constructor:e,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,rtl:"auto",enabled:!0,formatter:function(t){return Array.isArray(t)?t[0]+" : "+t[1]:t},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,ticks_tooltip:!1,scale:"linear",focus:!1,tooltip_position:null,labelledby:null,rangeHighlights:[]},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(t,e,i){t||(t=0);var n=this.getValue();this._state.value=this._validateInputValue(t);var s=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=s(this._state.value[0]),this._state.value[1]=s(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=s(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),"after"===this.options.selection?this._state.value[1]=this.options.max:this._state.value[1]=this.options.min),this.options.max>this.options.min?this._state.percentage=[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:this._state.percentage=[0,0,100],this._layout();var o=this.options.range?this._state.value:this._state.value[0];return this._setDataVal(o),!0===e&&this._trigger("slide",o),n!==o&&!0===i&&this._trigger("change",{oldValue:n,newValue:o}),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),t&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(t,e){return this._bindNonQueryEventHandler(t,e),this},off:function(e,i){t?(this.$element.off(e,i),this.$sliderElem.off(e,i)):this._unbindNonQueryEventHandler(e,i)},getAttribute:function(t){return t?this.options[t]:this.options},setAttribute:function(t,e){return this.options[t]=e,this},refresh:function(){return this._removeSliderEventHandlers(),s.call(this,this.element,this.options),t&&t.data(this.element,"slider",this),this},relayout:function(){return this._resize(),this._layout(),this},_removeSliderEventHandlers:function(){if(this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.options.ticks_tooltip){for(var t=this.ticksContainer.getElementsByClassName("slider-tick"),e=0;e<t.length;e++)t[e].removeEventListener("mouseenter",this.ticksCallbackMap[e].mouseEnter,!1),t[e].removeEventListener("mouseleave",this.ticksCallbackMap[e].mouseLeave,!1);this.handle1.removeEventListener("mouseenter",this.handleCallbackMap.handle1.mouseEnter,!1),this.handle2.removeEventListener("mouseenter",this.handleCallbackMap.handle2.mouseEnter,!1),this.handle1.removeEventListener("mouseleave",this.handleCallbackMap.handle1.mouseLeave,!1),this.handle2.removeEventListener("mouseleave",this.handleCallbackMap.handle2.mouseLeave,!1)}this.handleCallbackMap=null,this.ticksCallbackMap=null,this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.touchstart,!1),this.sliderElem.removeEventListener("touchmove",this.touchmove,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1),window.removeEventListener("resize",this.resize,!1)},_bindNonQueryEventHandler:function(t,e){void 0===this.eventToCallbackMap[t]&&(this.eventToCallbackMap[t]=[]),this.eventToCallbackMap[t].push(e)},_unbindNonQueryEventHandler:function(t,e){var i=this.eventToCallbackMap[t];if(void 0!==i)for(var n=0;n<i.length;n++)if(i[n]===e){i.splice(n,1);break}},_cleanUpEventCallbacksMap:function(){for(var t=Object.keys(this.eventToCallbackMap),e=0;e<t.length;e++){var i=t[e];delete this.eventToCallbackMap[i]}},_showTooltip:function(){!1===this.options.tooltip_split?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){!1===this._state.inDrag&&!0!==this.alwaysShowTooltip&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_setToolTipOnMouseOver:function(t){var e=this.options.formatter(t?t.value[0]:this._state.value[0]),i=n(t||this._state,this.options.reversed);function n(t,e){return e?[100-t.percentage[0],this.options.range?100-t.percentage[1]:t.percentage[1]]:[t.percentage[0],t.percentage[1]]}this._setText(this.tooltipInner,e),this.tooltip.style[this.stylePos]=i[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/2+"px")},_addTickListener:function(){return{addMouseEnter:function(t,e,i){var n=function(){var e=t._state,n=i>=0?i:this.attributes["aria-valuenow"].value,s=parseInt(n,10);e.value[0]=s,e.percentage[0]=t.options.ticks_positions[s],t._setToolTipOnMouseOver(e),t._showTooltip()};return e.addEventListener("mouseenter",n,!1),n},addMouseLeave:function(t,e){var i=function(){t._hideTooltip()};return e.addEventListener("mouseleave",i,!1),i}}},_layout:function(){var t,e;if(t=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=t[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),isNaN(this.options.formatter(this._state.value[0]))&&this.handle1.setAttribute("aria-valuetext",this.options.formatter(this._state.value[0])),this.handle2.style[this.stylePos]=t[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),isNaN(this.options.formatter(this._state.value[1]))&&this.handle2.setAttribute("aria-valuetext",this.options.formatter(this._state.value[1])),this.rangeHighlightElements.length>0&&Array.isArray(this.options.rangeHighlights)&&this.options.rangeHighlights.length>0)for(var i=0;i<this.options.rangeHighlights.length;i++){var n=this._toPercentage(this.options.rangeHighlights[i].start),s=this._toPercentage(this.options.rangeHighlights[i].end);if(this.options.reversed){var o=100-s;s=100-n,n=o}var r=this._createHighlightRange(n,s);r?"vertical"===this.options.orientation?(this.rangeHighlightElements[i].style.top=r.start+"%",this.rangeHighlightElements[i].style.height=r.size+"%"):(this.options.rtl?this.rangeHighlightElements[i].style.right=r.start+"%":this.rangeHighlightElements[i].style.left=r.start+"%",this.rangeHighlightElements[i].style.width=r.size+"%"):this.rangeHighlightElements[i].style.display="none"}if(Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var a,l="vertical"===this.options.orientation?"height":"width";a="vertical"===this.options.orientation?"marginTop":this.options.rtl?"marginRight":"marginLeft";var h=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var c=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[a]=-h/2+"px"),c=this.tickLabelContainer.offsetHeight;else for(p=0;p<this.tickLabelContainer.childNodes.length;p++)this.tickLabelContainer.childNodes[p].offsetHeight>c&&(c=this.tickLabelContainer.childNodes[p].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=c+"px")}for(var p=0;p<this.options.ticks.length;p++){var d=this.options.ticks_positions[p]||this._toPercentage(this.options.ticks[p]);this.options.reversed&&(d=100-d),this.ticks[p].style[this.stylePos]=d+"%",this._removeClass(this.ticks[p],"in-selection"),this.options.range?d>=t[0]&&d<=t[1]&&this._addClass(this.ticks[p],"in-selection"):"after"===this.options.selection&&d>=t[0]?this._addClass(this.ticks[p],"in-selection"):"before"===this.options.selection&&d<=t[0]&&this._addClass(this.ticks[p],"in-selection"),this.tickLabels[p]&&(this.tickLabels[p].style[l]=h+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[p]?(this.tickLabels[p].style.position="absolute",this.tickLabels[p].style[this.stylePos]=d+"%",this.tickLabels[p].style[a]=-h/2+"px"):"vertical"===this.options.orientation&&(this.options.rtl?this.tickLabels[p].style.marginRight=this.sliderElem.offsetWidth+"px":this.tickLabels[p].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style[a]=this.sliderElem.offsetWidth/2*-1+"px"))}}if(this.options.range){e=this.options.formatter(this._state.value),this._setText(this.tooltipInner,e),this.tooltip.style[this.stylePos]=(t[1]+t[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/2+"px");var u=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,u);var g=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,g),this.tooltip_min.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-"+this.stylePos,-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-"+this.stylePos,-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=t[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-"+this.stylePos,-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-"+this.stylePos,-this.tooltip_max.offsetWidth/2+"px")}else e=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,e),this.tooltip.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(t[0],t[1])+"%",this.trackSelection.style.top=Math.min(t[0],t[1])+"%",this.trackSelection.style.height=Math.abs(t[0]-t[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";else{"right"===this.stylePos?this.trackLow.style.right="0":this.trackLow.style.left="0",this.trackLow.style.width=Math.min(t[0],t[1])+"%","right"===this.stylePos?this.trackSelection.style.right=Math.min(t[0],t[1])+"%":this.trackSelection.style.left=Math.min(t[0],t[1])+"%",this.trackSelection.style.width=Math.abs(t[0]-t[1])+"%","right"===this.stylePos?this.trackHigh.style.left="0":this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";var f=this.tooltip_min.getBoundingClientRect(),m=this.tooltip_max.getBoundingClientRect();"bottom"===this.options.tooltip_position?f.right>m.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):f.right>m.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_createHighlightRange:function(t,e){return this._isHighlightRange(t,e)?t>e?{start:e,size:t-e}:{start:t,size:e-t}:null},_isHighlightRange:function(t,e){return 0<=t&&t<=100&&0<=e&&e<=100},_resize:function(t){this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(t,e){t.style.removeProperty?t.style.removeProperty(e):t.style.removeAttribute(e)},_mousedown:function(t){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var e=this._getPercentage(t);if(this.options.range){var i=Math.abs(this._state.percentage[0]-e),n=Math.abs(this._state.percentage[1]-e);this._state.dragged=i<n?0:1,this._adjustPercentageForRangeSliders(e)}else this._state.dragged=0;this._state.percentage[this._state.dragged]=e,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var s=this._calculateValue();return this._trigger("slideStart",s),this._setDataVal(s),this.setValue(s,!1,!0),t.returnValue=!1,this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_touchstart:function(t){if(void 0!==t.changedTouches){var e=t.changedTouches[0];this.touchX=e.pageX,this.touchY=e.pageY}else this._mousedown(t)},_triggerFocusOnHandle:function(t){0===t&&this.handle1.focus(),1===t&&this.handle2.focus()},_keydown:function(t,e){if(!this._state.enabled)return!1;var i;switch(e.keyCode){case 37:case 40:i=-1;break;case 39:case 38:i=1}if(i){if(this.options.natural_arrow_keys){var n="vertical"===this.options.orientation&&!this.options.reversed,s="horizontal"===this.options.orientation&&this.options.reversed;(n||s)&&(i=-i)}var o=this._state.value[t]+i*this.options.step,r=o/this.options.max*100;return this._state.keyCtrl=t,this.options.range&&(this._adjustPercentageForRangeSliders(r),o=[this._state.keyCtrl?this._state.value[0]:o,this._state.keyCtrl?o:this._state.value[1]]),this._trigger("slideStart",o),this._setDataVal(o),this.setValue(o,!0,!0),this._setDataVal(o),this._trigger("slideStop",o),this._layout(),this._pauseEvent(e),delete this._state.keyCtrl,!1}},_pauseEvent:function(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1},_mousemove:function(t){if(!this._state.enabled)return!1;var e=this._getPercentage(t);this._adjustPercentageForRangeSliders(e),this._state.percentage[this._state.dragged]=e,this._layout();var i=this._calculateValue(!0);return this.setValue(i,!0,!0),!1},_touchmove:function(t){if(void 0!==t.changedTouches){var e=t.changedTouches[0],i=e.pageX-this.touchX,n=e.pageY-this.touchY;this._state.inDrag||("vertical"===this.options.orientation&&i<=5&&i>=-5&&(n>=15||n<=-15)?this._mousedown(t):n<=5&&n>=-5&&(i>=15||i<=-15)&&this._mousedown(t))}},_adjustPercentageForRangeSliders:function(t){if(this.options.range){var e=this._getNumDigitsAfterDecimalPlace(t);e=e?e-1:0;var i=this._applyToFixedAndParseFloat(t,e);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],e)<i?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],e)>i?(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0):0===this._state.keyCtrl&&this._state.value[1]/this.options.max*100<t?(this._state.percentage[0]=this._state.percentage[1],this._state.keyCtrl=1,this.handle2.focus()):1===this._state.keyCtrl&&this._state.value[0]/this.options.max*100>t&&(this._state.percentage[1]=this._state.percentage[0],this._state.keyCtrl=0,this.handle1.focus())}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,!1===this._state.over&&this._hideTooltip();var t=this._calculateValue(!0);return this._layout(),this._setDataVal(t),this._trigger("slideStop",t),!1},_calculateValue:function(t){var e;if(this.options.range?(e=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(e[0]=this._toValue(this._state.percentage[0]),e[0]=this._applyPrecision(e[0])),100!==this._state.percentage[1]&&(e[1]=this._toValue(this._state.percentage[1]),e[1]=this._applyPrecision(e[1]))):(e=this._toValue(this._state.percentage[0]),e=parseFloat(e),e=this._applyPrecision(e)),t){for(var i=[e,1/0],n=0;n<this.options.ticks.length;n++){var s=Math.abs(this.options.ticks[n]-e);s<=i[1]&&(i=[this.options.ticks[n],s])}if(i[1]<=this.options.ticks_snap_bounds)return i[0]}return e},_applyPrecision:function(t){var e=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(t,e)},_getNumDigitsAfterDecimalPlace:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},_applyToFixedAndParseFloat:function(t,e){var i=t.toFixed(e);return parseFloat(i)},_getPercentage:function(t){!this.touchCapable||"touchstart"!==t.type&&"touchmove"!==t.type||(t=t.touches[0]);var e=t[this.mousePos]-this._state.offset[this.stylePos];"right"===this.stylePos&&(e=-e);var i=e/this._state.size*100;return i=Math.round(i/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(i=100-i),Math.max(0,Math.min(100,i))},_validateInputValue:function(t){if(isNaN(+t)){if(Array.isArray(t))return this._validateArray(t),t;throw new Error(i(t))}return+t},_validateArray:function(t){for(var e=0;e<t.length;e++){var n=t[e];if("number"!=typeof n)throw new Error(i(n))}},_setDataVal:function(t){this.element.setAttribute("data-value",t),this.element.setAttribute("value",t),this.element.value=t},_trigger:function(e,i){i=i||0===i?i:void 0;var n=this.eventToCallbackMap[e];if(n&&n.length)for(var s=0;s<n.length;s++)(0,n[s])(i);t&&this._triggerJQueryEvent(e,i)},_triggerJQueryEvent:function(t,e){var i={type:t,value:e};this.$element.trigger(i),this.$sliderElem.trigger(i)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(t,e){void 0!==t.textContent?t.textContent=e:void 0!==t.innerText&&(t.innerText=e)},_removeClass:function(t,e){for(var i=e.split(" "),n=t.className,s=0;s<i.length;s++){var o=i[s],r=new RegExp("(?:\\s|^)"+o+"(?:\\s|$)");n=n.replace(r," ")}t.className=n.trim()},_addClass:function(t,e){for(var i=e.split(" "),n=t.className,s=0;s<i.length;s++){var o=i[s];new RegExp("(?:\\s|^)"+o+"(?:\\s|$)").test(n)||(n+=" "+o)}t.className=n.trim()},_offsetLeft:function(t){return t.getBoundingClientRect().left},_offsetRight:function(t){return t.getBoundingClientRect().right},_offsetTop:function(t){for(var e=t.offsetTop;(t=t.offsetParent)&&!isNaN(t.offsetTop);)e+=t.offsetTop,"BODY"!==t.tagName&&(e-=t.scrollTop);return e},_offset:function(t){return{left:this._offsetLeft(t),right:this._offsetRight(t),top:this._offsetTop(t)}},_css:function(e,i,n){if(t)t.style(e,i,n);else{var s=i.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(t,e){return e.toUpperCase()}));e.style[s]=n}},_toValue:function(t){return this.options.scale.toValue.apply(this,[t])},_toPercentage:function(t){return this.options.scale.toPercentage.apply(this,[t])},_setTooltipPosition:function(){var t=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var e,i="left"===(e=this.options.tooltip_position?this.options.tooltip_position:this.options.rtl?"left":"right")?"right":"left";t.forEach(function(t){this._addClass(t,e),t.style[i]="100%"}.bind(this))}else"bottom"===this.options.tooltip_position?t.forEach(function(t){this._addClass(t,"bottom"),t.style.top="22px"}.bind(this)):t.forEach(function(t){this._addClass(t,"top"),t.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},t&&t.fn){var o=void 0;t.fn.slider?(a&&window.console.warn("bootstrap-slider.js - WARNING: $.fn.slider namespace is already bound. Use the $.fn.bootstrapSlider namespace instead."),o="bootstrapSlider"):(t.bridget("slider",e),o="slider"),t.bridget("bootstrapSlider",e),t((function(){t("input[data-provide=slider]")[o]()}))}}(t),e})?n.apply(e,s):n)||(t.exports=o)},4656:function(t,e,i){},4657:function(t,e,i){},4658:function(t,e,i){},4661:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(0),s=i.n(n),o=i(2),r=i.n(o),a=i(302);i(4662);const l={categories:r.a.object,toggleCategory:r.a.func,showSingleCategory:r.a.func,format:r.a.string,position:r.a.oneOf([null,"tl","tr","bl","br"])};class h extends s.a.PureComponent{format(t){if(!this.props.format)return t;const e=parseFloat(t);return Object(a.b)(this.props.format,e)}formatCategoryLabel(t){if(!this.props.format)return t;if(t.includes(" - ")){const e=t.split(" - ");return this.format(e[0])+" - "+this.format(e[1])}return this.format(t)}render(){if(0===Object.keys(this.props.categories).length||null===this.props.position)return null;const t=Object.entries(this.props.categories).map(t=>{let[e,i]=t;const n={color:"rgba("+i.color.join(", ")+")"},o=i.enabled?"◼":"◻";return s.a.createElement("li",{key:e},s.a.createElement("a",{href:"#",onClick:()=>this.props.toggleCategory(e),onDoubleClick:()=>this.props.showSingleCategory(e)},s.a.createElement("span",{style:n},o)," ",this.formatCategoryLabel(e)))}),e={position:"absolute",["t"===this.props.position.charAt(0)?"top":"bottom"]:"0px",["r"===this.props.position.charAt(1)?"right":"left"]:"10px"};return s.a.createElement("div",{className:"legend",style:e},s.a.createElement("ul",{className:"categories"},t))}}h.propTypes=l,h.defaultProps={categories:{},toggleCategory:()=>{},showSingleCategory:()=>{},format:null,position:"tr"}},4662:function(t,e,i){},4693:function(t,e,i){"use strict";i.d(e,"b",(function(){return p})),i.d(e,"a",(function(){return d}));var n=i(4724),s=i.n(n),o=i(4645);const r=o.a.CLOCKWISE,a=o.a.COUNTER_CLOCKWISE,l={isClosed:!0};function h(t,e,i,n,s){let r=e;const a=i.length;for(let e=0;e<a;e++)for(let s=0;s<n;s++)t[r++]=i[e][s]||0;if(!function(t){const e=t[0],i=t[t.length-1];return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]}(i))for(let e=0;e<n;e++)t[r++]=i[0][e]||0;return l.start=e,l.end=r,l.size=n,Object(o.f)(t,s,l),r}function c(t,e,i,n,s=0,r,a){const h=(r=r||i.length)-s;if(h<=0)return e;let c=e;for(let e=0;e<h;e++)t[c++]=i[s+e];if(!function(t,e,i,n){for(let s=0;s<e;s++)if(t[i+s]!==t[n-e+s])return!1;return!0}(i,n,s,r))for(let e=0;e<n;e++)t[c++]=i[s+e];return l.start=e,l.end=c,l.size=n,Object(o.f)(t,a,l),c}function p(t,e){!function(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}(t);const i=[],n=[];if(t.positions){const{positions:s,holeIndices:o}=t;if(o){let t=0;for(let l=0;l<=o.length;l++)t=c(i,t,s,e,o[l-1],o[l],0===l?r:a),n.push(t);return n.pop(),{positions:i,holeIndices:n}}t=s}if(Number.isFinite(t[0]))return c(i,0,t,e,0,i.length,r),i;if(!function(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}(t)){let s=0;for(const[o,l]of t.entries())s=h(i,s,l,e,0===o?r:a),n.push(s);return n.pop(),{positions:i,holeIndices:n}}return h(i,0,t,e,r),i}function d(t,e,i){let n=null;t.holeIndices&&(n=t.holeIndices.map(t=>t/e));let o=t.positions||t;if(i){const t=o.length;o=o.slice();const n=[];for(let s=0;s<t;s+=e){n[0]=o[s],n[1]=o[s+1];const t=i(n);o[s]=t[0],o[s+1]=t[1]}}return s()(o,n,e)}},4698:function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var n=i(4717),s=i(4802),o=i(4837),r=i(4653),a=i(4992),l=i(4803),h=i(4757),c=i(4645);class p extends h.a{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):()=>null}normalizeGeometry(t){return this.normalize?function(t,e,i,n){let s=t;if(Array.isArray(t[0])){const i=t.length*e;s=new Array(i);for(let i=0;i<t.length;i++)for(let n=0;n<e;n++)s[i*e+n]=t[i][n]||0}return i?Object(c.d)(s,{size:e,gridResolution:i}):n?Object(c.e)(s,{size:e}):s}(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}get(t){return this.attributes[t]}getGeometrySize(t){if(Array.isArray(t[0])){let e=0;for(const i of t)e+=this.getGeometrySize(i);return e}const e=this.getPathLength(t);return e<2?0:this.isClosed(t)?e<3?0:e+2:e}updateGeometryAttributes(t,e){if(0!==e.geometrySize)if(t&&Array.isArray(t[0]))for(const i of t){const t=this.getGeometrySize(i);e.geometrySize=t,this.updateGeometryAttributes(i,e),e.vertexStart+=t}else this._updateSegmentTypes(t,e),this._updatePositions(t,e)}_updateSegmentTypes(t,e){const{segmentTypes:i}=this.attributes,n=this.isClosed(t),{vertexStart:s,geometrySize:o}=e;i.fill(0,s,s+o),n?(i[s]=4,i[s+o-2]=4):(i[s]+=1,i[s+o-2]+=2),i[s+o-1]=4}_updatePositions(t,e){const{positions:i}=this.attributes;if(!i)return;const{vertexStart:n,geometrySize:s}=e,o=new Array(3);for(let e=n,r=0;r<s;e++,r++)this.getPointOnPath(t,r,o),i[3*e]=o[0],i[3*e+1]=o[1],i[3*e+2]=o[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,e,i=[]){const{positionSize:n}=this;e*n>=t.length&&(e+=1-t.length/n);const s=e*n;return i[0]=t[s],i[1]=t[s+1],i[2]=3===n&&t[s+2]||0,i}isClosed(t){if(!this.normalize)return this.opts.loop;const{positionSize:e}=this,i=t.length-e;return t[0]===t[i]&&t[1]===t[i+1]&&(2===e||t[2]===t[i+2])}}const d=[0,0,0,255],u={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:d},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},g={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class f extends n.a{getShaders(){return super.getShaders({vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\n    vJointType = capType;\n  } else {\n    vJointType = jointType;\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return currPoint + offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.worldPosition = instanceStartPositions;\n  geometry.worldPositionAlt = instanceEndPositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec2 widthPixels = vec2(clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition, width.xy),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[s.a,o.a]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:g,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:g,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:g,defaultValue:d},instancePickingColors:{size:3,type:5121,accessor:(t,{index:e,target:i})=>this.encodePickingColor(t&&t.__source?t.__source.index:e,i)}}),this.setState({pathTesselator:new p({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&r.a.removed("getDashArray","PathStyleExtension")()}updateState({oldProps:t,props:e,changeFlags:i}){super.updateState({props:e,oldProps:t,changeFlags:i});const n=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){const{pathTesselator:t}=this.state,s=e.data.attributes||{};t.updateGeometry({data:e.data,geometryBuffer:s.getPath,buffers:s,normalize:!e._pathType,loop:"loop"===e._pathType,getGeometry:e.getPath,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:i.dataChanged}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),i.dataChanged||n.invalidateAll()}if(i.extensionsChanged){var s;const{gl:t}=this.context;null===(s=this.state.model)||void 0===s||s.delete(),this.state.model=this._getModel(t),n.invalidateAll()}}getPickingInfo(t){const e=super.getPickingInfo(t),{index:i}=e,{data:n}=this.props;return n[0]&&n[0].__source&&(e.object=n.find(t=>t.__source.index===i)),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let i=0;i<e.length;i++)e[i].__source.index===t&&this._disablePickingIndex(i);else this._disablePickingIndex(t)}draw({uniforms:t}){const{viewport:e}=this.context,{jointRounded:i,capRounded:n,billboard:s,miterLimit:o,widthUnits:r,widthScale:a,widthMinPixels:l,widthMaxPixels:h}=this.props,c="pixels"===r?e.metersPerPixel:1;this.state.model.setUniforms(t).setUniforms({jointType:Number(i),capType:Number(n),billboard:s,widthScale:a*c,miterLimit:o,widthMinPixels:l,widthMaxPixels:h}).draw()}_getModel(t){return new a.a(t,{...this.getShaders(),id:this.props.id,geometry:new l.a({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateSegmentTypes(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("segmentTypes")}}f.layerName="PathLayer",f.defaultProps=u},4712:function(t,e,i){"use strict";function n({data:t,getIndex:e,dataRange:i,replace:n}){const{startRow:s=0,endRow:o=1/0}=i,r=t.length;let a=r,l=r;for(let i=0;i<r;i++){const n=e(t[i]);if(a>i&&n>=s&&(a=i),n>=o){l=i;break}}let h=a;const c=l-a!==n.length,p=c&&t.slice(l);for(let e=0;e<n.length;e++)t[h++]=n[e];if(c){for(let e=0;e<p.length;e++)t[h++]=p[e];t.length=h}return{startRow:a,endRow:a+n.length}}i.d(e,"a",(function(){return n}))},4718:function(t,e,i){"use strict";i.d(e,"a",(function(){return C}));var n=i(4717),s=i(4802),o=i(4739),r=i(4837),a=i(4690),l=i(5018),h=i(4867),c=i(4992),p=i(4803),d=i(4693),u=i(4757),g=i(4645);class f extends u.a{constructor(t){const{fp64:e,IndexType:i=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:e?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:i,size:1}}})}get(t){const{attributes:e}=this;return"indices"===t?e.indices&&e.indices.subarray(0,this.vertexCount):e[t]}updateGeometry(t){super.updateGeometry(t);const e=this.buffers.indices;e&&(this.vertexCount=(e.value||e).length)}normalizeGeometry(t){if(this.normalize){if(t=d.b(t,this.positionSize),this.opts.resolution)return Object(g.b)(t.positions||t,t.holeIndices,{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0});if(this.opts.wrapLongitude)return Object(g.c)(t.positions||t,t.holeIndices,{size:this.positionSize,maxLatitude:86,edgeTypes:!0})}return t}getGeometrySize(t){if(Array.isArray(t)&&!Number.isFinite(t[0])){let e=0;for(const i of t)e+=this.getGeometrySize(i);return e}return(t.positions||t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):()=>null}updateGeometryAttributes(t,e){if(Array.isArray(t)&&!Number.isFinite(t[0]))for(const i of t){const t=this.getGeometrySize(i);e.geometrySize=t,this.updateGeometryAttributes(i,e),e.vertexStart+=t,e.indexStart=this.indexStarts[e.geometryIndex+1]}else this._updateIndices(t,e),this._updatePositions(t,e),this._updateVertexValid(t,e)}_updateIndices(t,{geometryIndex:e,vertexStart:i,indexStart:n}){const{attributes:s,indexStarts:o,typedArrayManager:r}=this;let a=s.indices;if(!a)return;let l=n;const h=d.a(t,this.positionSize,this.opts.preproject);a=r.allocate(a,n+h.length,{copy:!0});for(let t=0;t<h.length;t++)a[l++]=h[t]+i;o[e+1]=n+h.length,s.indices=a}_updatePositions(t,{vertexStart:e,geometrySize:i}){const{attributes:{positions:n},positionSize:s}=this;if(!n)return;const o=t.positions||t;for(let t=e,r=0;r<i;t++,r++){const e=o[r*s],i=o[r*s+1],a=s>2?o[r*s+2]:0;n[3*t]=e,n[3*t+1]=i,n[3*t+2]=a}}_updateVertexValid(t,{vertexStart:e,geometrySize:i}){const{attributes:{vertexValid:n},positionSize:s}=this,o=t&&t.holeIndices;if(t&&t.edgeTypes?n.set(t.edgeTypes,e):n.fill(1,e,e+i),o)for(let t=0;t<o.length;t++)n[e+o[t]/s-1]=0;n[e+i-1]=0}}var m="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n\n#ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n    geometry.normal = normal;\n  }\n\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",v="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(m,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),y="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(m,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  #if RING_WINDING_ORDER_CW == 1\n    props.positions = instancePositions;\n    props.positions64Low = instancePositions64Low;\n    props.nextPositions = nextPositions;\n    props.nextPositions64Low = nextPositions64Low;\n  #else\n    props.positions = nextPositions;\n    props.positions64Low = nextPositions64Low;\n    props.nextPositions = instancePositions;\n    props.nextPositions64Low = instancePositions64Low;\n  #endif\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n\n  calculatePosition(props);\n}\n");const _=[0,0,0,255],b={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:_},getLineColor:{type:"accessor",value:_},material:!0},x={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class C extends n.a{getShaders(t){return super.getShaders({vs:"top"===t?v:y,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[s.a,o.a,r.a]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:e}=this.context;let{coordinateSystem:i}=this.props;e.isGeospatial&&i===a.a.DEFAULT&&(i=a.a.LNGLAT),this.setState({numInstances:0,polygonTesselator:new f({preproject:i===a.a.LNGLAT&&e.projectFlat,fp64:this.use64bitPositions(),IndexType:!t||Object(l.c)(t,h.a.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const n=this.getAttributeManager();n.remove(["instancePickingColors"]),n.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:x,accessor:"getPolygon",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:!0},elevations:{size:1,transition:x,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:x,accessor:"getFillColor",defaultValue:_,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:x,accessor:"getLineColor",defaultValue:_,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(t,{index:e,target:i})=>this.encodePickingColor(t&&t.__source?t.__source.index:e,i),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:i}=e,{data:n}=this.props;return n[0]&&n[0].__source&&(e.object=n.find(t=>t.__source.index===i)),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let i=0;i<e.length;i++)e[i].__source.index===t&&this._disablePickingIndex(i);else this._disablePickingIndex(t)}draw({uniforms:t}){const{extruded:e,filled:i,wireframe:n,elevationScale:s}=this.props,{topModel:o,sideModel:r,polygonTesselator:a}=this.state,l={...t,extruded:Boolean(e),elevationScale:s};r&&(r.setInstanceCount(a.instanceCount-1),r.setUniforms(l),n&&(r.setDrawMode(3),r.setUniforms({isWireframe:!0}).draw()),i&&(r.setDrawMode(6),r.setUniforms({isWireframe:!1}).draw())),o&&(o.setVertexCount(a.vertexCount),o.setUniforms(l).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:e,oldProps:i,changeFlags:n}=t,s=this.getAttributeManager();var o;(n.extensionsChanged||e.filled!==i.filled||e.extruded!==i.extruded)&&(null===(o=this.state.models)||void 0===o||o.forEach(t=>t.delete()),this.setState(this._getModels(this.context.gl)),s.invalidateAll())}updateGeometry({props:t,oldProps:e,changeFlags:i}){if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPolygon)){const{polygonTesselator:e}=this.state,n=t.data.attributes||{};e.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:n.getPolygon,buffers:n,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:i.dataChanged}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),i.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:e,filled:i,extruded:n}=this.props;let s,o;if(i){const i=this.getShaders("top");i.defines.NON_INSTANCED_MODEL=1,s=new c.a(t,{...i,id:"".concat(e,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return n&&(o=new c.a(t,{...this.getShaders("side"),id:"".concat(e,"-side"),geometry:new p.a({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,s].filter(Boolean),topModel:s,sideModel:o}}calculateIndices(t){const{polygonTesselator:e}=this.state;t.startIndices=e.indexStarts,t.value=e.get("indices")}calculatePositions(t){const{polygonTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}C.layerName="SolidPolygonLayer",C.defaultProps=b},4723:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(4717),s=i(4667),o=i(4678);class r extends n.a{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:e}=t;return e&&e.__source&&e.__source.parent&&e.__source.parent.id===this.id?(t.object=e.__source.object,t.index=e.__source.index,t):t}renderLayers(){return null}filterSubLayer(t){return!0}shouldRenderSubLayer(t,e){const{_subLayerProps:i}=this.props;return e&&e.length||i&&i[t]}getSubLayerClass(t,e){const{_subLayerProps:i}=this.props;return i&&i[t]&&i[t].type||e}getSubLayerRow(t,e,i){return t.__source={parent:this,object:e,index:i},t}getSubLayerAccessor(t){if("function"==typeof t){const e={data:this.props.data,target:[]};return(i,n)=>i&&i.__source?(e.index=i.__source.index,t(i.__source.object,e)):t(i,n)}return t}getSubLayerProps(t={}){const{opacity:e,pickable:i,visible:n,parameters:s,getPolygonOffset:o,highlightedObjectIndex:r,autoHighlight:a,highlightColor:l,coordinateSystem:h,coordinateOrigin:c,wrapLongitude:p,positionFormat:d,modelMatrix:u,extensions:g,fetch:f,_subLayerProps:m}=this.props,v={opacity:e,pickable:i,visible:n,parameters:s,getPolygonOffset:o,highlightedObjectIndex:r,autoHighlight:a,highlightColor:l,coordinateSystem:h,coordinateOrigin:c,wrapLongitude:p,positionFormat:d,modelMatrix:u,extensions:g,fetch:f},y=m&&m[t.id],_=y&&y.updateTriggers,b=t.id||"sublayer";if(y){const e=this.constructor._propTypes,i=t.type?t.type._propTypes:{};for(const t in y){const n=i[t]||e[t];n&&"accessor"===n.type&&(y[t]=this.getSubLayerAccessor(y[t]))}}Object.assign(v,t,y),v.id="".concat(this.props.id,"-").concat(b),v.updateTriggers={all:this.props.updateTriggers.all,...t.updateTriggers,..._};for(const t of g){const e=t.getSubLayerProps.call(this,t);e&&Object.assign(v,e,{updateTriggers:Object.assign(v.updateTriggers,e.updateTriggers)})}return v}_updateAutoHighlight(t){for(const e of this.getSubLayers())e.updateAutoHighlight(t)}_getAttributeManager(){return null}_renderLayers(){let{subLayers:t}=this.internalState;const e=!t||this.needsUpdate();e&&(t=this.renderLayers(),t=Object(o.b)(t,Boolean),this.internalState.subLayers=t),Object(s.a)("compositeLayer.renderLayers",this,e,t);for(const e of t)e.parent=this}}r.layerName="CompositeLayer"},4724:function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n,a,l,h,c,u,g,m=e&&e.length,v=m?e[0]*i:t.length,y=s(t,0,v,i,!0),_=[];if(!y||y.next===y.prev)return _;if(m&&(y=function(t,e,i,n){var r,a,l,h,c,u=[];for(r=0,a=e.length;r<a;r++)l=e[r]*n,h=r<a-1?e[r+1]*n:t.length,(c=s(t,l,h,n,!1))===c.next&&(c.steiner=!0),u.push(f(c));for(u.sort(p),r=0;r<u.length;r++)d(u[r],i),i=o(i,i.next);return i}(t,e,y,i)),t.length>80*i){n=l=t[0],a=h=t[1];for(var b=i;b<v;b+=i)(c=t[b])<n&&(n=c),(u=t[b+1])<a&&(a=u),c>l&&(l=c),u>h&&(h=u);g=0!==(g=Math.max(l-n,h-a))?1/g:0}return r(y,_,i,n,a,g),_}function s(t,e,i,n,s){var o,r;if(s===k(t,e,i,n)>0)for(o=e;o<i;o+=n)r=L(o,t[o],t[o+1],r);else for(o=i-n;o>=e;o-=n)r=L(o,t[o],t[o+1],r);return r&&_(r,r.next)&&(E(r),r=r.next),r}function o(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!_(n,n.next)&&0!==y(n.prev,n,n.next))n=n.next;else{if(E(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function r(t,e,i,n,s,p,d){if(t){!d&&p&&function(t,e,i,n){var s=t;do{null===s.z&&(s.z=g(s.x,s.y,e,i,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,function(t){var e,i,n,s,o,r,a,l,h=1;do{for(i=t,t=null,o=null,r=0;i;){for(r++,n=i,a=0,e=0;e<h&&(a++,n=n.nextZ);e++);for(l=h;a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(s=i,i=i.nextZ,a--):(s=n,n=n.nextZ,l--),o?o.nextZ=s:t=s,s.prevZ=o,o=s;i=n}o.nextZ=null,h*=2}while(r>1)}(s)}(t,n,s,p);for(var u,f,m=t;t.prev!==t.next;)if(u=t.prev,f=t.next,p?l(t,n,s,p):a(t))e.push(u.i/i),e.push(t.i/i),e.push(f.i/i),E(t),t=f.next,m=f.next;else if((t=f)===m){d?1===d?r(t=h(o(t),e,i),e,i,n,s,p,2):2===d&&c(t,e,i,n,s,p):r(o(t),e,i,n,s,p,1);break}}}function a(t){var e=t.prev,i=t,n=t.next;if(y(e,i,n)>=0)return!1;for(var s=t.next.next;s!==t.prev;){if(m(e.x,e.y,i.x,i.y,n.x,n.y,s.x,s.y)&&y(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function l(t,e,i,n){var s=t.prev,o=t,r=t.next;if(y(s,o,r)>=0)return!1;for(var a=s.x<o.x?s.x<r.x?s.x:r.x:o.x<r.x?o.x:r.x,l=s.y<o.y?s.y<r.y?s.y:r.y:o.y<r.y?o.y:r.y,h=s.x>o.x?s.x>r.x?s.x:r.x:o.x>r.x?o.x:r.x,c=s.y>o.y?s.y>r.y?s.y:r.y:o.y>r.y?o.y:r.y,p=g(a,l,e,i,n),d=g(h,c,e,i,n),u=t.prevZ,f=t.nextZ;u&&u.z>=p&&f&&f.z<=d;){if(u!==t.prev&&u!==t.next&&m(s.x,s.y,o.x,o.y,r.x,r.y,u.x,u.y)&&y(u.prev,u,u.next)>=0)return!1;if(u=u.prevZ,f!==t.prev&&f!==t.next&&m(s.x,s.y,o.x,o.y,r.x,r.y,f.x,f.y)&&y(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;u&&u.z>=p;){if(u!==t.prev&&u!==t.next&&m(s.x,s.y,o.x,o.y,r.x,r.y,u.x,u.y)&&y(u.prev,u,u.next)>=0)return!1;u=u.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&m(s.x,s.y,o.x,o.y,r.x,r.y,f.x,f.y)&&y(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function h(t,e,i){var n=t;do{var s=n.prev,r=n.next.next;!_(s,r)&&b(s,n,n.next,r)&&P(s,r)&&P(r,s)&&(e.push(s.i/i),e.push(n.i/i),e.push(r.i/i),E(n),E(n.next),n=t=r),n=n.next}while(n!==t);return o(n)}function c(t,e,i,n,s,a){var l=t;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&v(l,h)){var c=w(l,h);return l=o(l,l.next),c=o(c,c.next),r(l,e,i,n,s,a),void r(c,e,i,n,s,a)}h=h.next}l=l.next}while(l!==t)}function p(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var i,n=e,s=t.x,o=t.y,r=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=s&&a>r){if(r=a,a===s){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(s===r)return i;var l,h=i,c=i.x,p=i.y,d=1/0;n=i;do{s>=n.x&&n.x>=c&&s!==n.x&&m(o<p?s:r,o,c,p,o<p?r:s,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(s-n.x),P(n,t)&&(l<d||l===d&&(n.x>i.x||n.x===i.x&&u(i,n)))&&(i=n,d=l)),n=n.next}while(n!==h);return i}(t,e)){var i=w(e,t);o(e,e.next),o(i,i.next)}}function u(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function g(t,e,i,n,s){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*s)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*s)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function m(t,e,i,n,s,o,r,a){return(s-r)*(e-a)-(t-r)*(o-a)>=0&&(t-r)*(n-a)-(i-r)*(e-a)>=0&&(i-r)*(o-a)-(s-r)*(n-a)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&b(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(P(t,e)&&P(e,t)&&function(t,e){var i=t,n=!1,s=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&s<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||_(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,i,n){var s=C(y(t,e,i)),o=C(y(t,e,n)),r=C(y(i,n,t)),a=C(y(i,n,e));return s!==o&&r!==a||(!(0!==s||!x(t,i,e))||(!(0!==o||!x(t,n,e))||(!(0!==r||!x(i,t,n))||!(0!==a||!x(i,e,n)))))}function x(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function C(t){return t>0?1:t<0?-1:0}function P(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function w(t,e){var i=new S(t.i,t.x,t.y),n=new S(e.i,e.x,e.y),s=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=s,s.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function L(t,e,i,n){var s=new S(t,e,i);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(t,e,i,n){for(var s=0,o=e,r=i-n;o<i;o+=n)s+=(t[r]-t[o])*(t[o+1]+t[r+1]),r=o;return s}t.exports=n,t.exports.default=n,n.deviation=function(t,e,i,n){var s=e&&e.length,o=s?e[0]*i:t.length,r=Math.abs(k(t,0,o,i));if(s)for(var a=0,l=e.length;a<l;a++){var h=e[a]*i,c=a<l-1?e[a+1]*i:t.length;r-=Math.abs(k(t,h,c,i))}var p=0;for(a=0;a<n.length;a+=3){var d=n[a]*i,u=n[a+1]*i,g=n[a+2]*i;p+=Math.abs((t[d]-t[g])*(t[u+1]-t[d+1])-(t[d]-t[u])*(t[g+1]-t[d+1]))}return 0===r&&0===p?0:Math.abs((p-r)/r)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,s=0;s<t.length;s++){for(var o=0;o<t[s].length;o++)for(var r=0;r<e;r++)i.vertices.push(t[s][o][r]);s>0&&(n+=t[s-1].length,i.holes.push(n))}return i}},4739:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n";const s={lightSources:{}};function o({color:t=[0,0,0],intensity:e=1}={}){return t.map(t=>t*e/255)}const r={name:"lights",vs:n,fs:n,getUniforms:function t(e=s){if("lightSources"in e){const{ambientLight:t,pointLights:i,directionalLights:n}=e.lightSources||{};return t||i&&i.length>0||n&&n.length>0?Object.assign({},function({ambientLight:t,pointLights:e=[],directionalLights:i=[]}){const n={};return n["lighting_uAmbientLight.color"]=t?o(t):[0,0,0],e.forEach((t,e)=>{n["lighting_uPointLight[".concat(e,"].color")]=o(t),n["lighting_uPointLight[".concat(e,"].position")]=t.position,n["lighting_uPointLight[".concat(e,"].attenuation")]=t.attenuation||[1,0,0]}),n.lighting_uPointLightCount=e.length,i.forEach((t,e)=>{n["lighting_uDirectionalLight[".concat(e,"].color")]=o(t),n["lighting_uDirectionalLight[".concat(e,"].direction")]=t.direction}),n.lighting_uDirectionalLightCount=i.length,n}({ambientLight:t,pointLights:i,directionalLights:n}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const i={pointLights:[],directionalLights:[]};for(const t of e.lights||[])switch(t.type){case"ambient":i.ambientLight=t;break;case"directional":i.directionalLights.push(t);break;case"point":i.pointLights.push(t)}return t({lightSources:i})}return{}},defines:{MAX_LIGHTS:3}};var a="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n";const l={};function h(t=l){if(!("material"in t))return{};const{material:e}=t;return e?function(t){const{ambient:e=.35,diffuse:i=.6,shininess:n=32,specularColor:s=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:i,lighting_uShininess:n,lighting_uSpecularColor:s.map(t=>t/255)}}(e):{lighting_uEnabled:!1}}const c={name:"gouraud-lighting",dependencies:[r],vs:a,defines:{LIGHTING_VERTEX:1},getUniforms:h}},4757:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(4692),s=i(4686),o=i(4671),r=i(4689);class a{constructor(t={}){const{attributes:e={}}=t;this.typedArrayManager=s.a,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=e,this.opts=t,this.updateGeometry(t),Object.seal(this)}updateGeometry(t){Object.assign(this.opts,t);const{data:e,buffers:i={},getGeometry:n,geometryBuffer:s,positionFormat:r,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=e,this.getGeometry=n,this.positionSize=s&&s.size||("XY"===r?2:3),this.buffers=i,this.normalize=l,s&&(Object(o.a)(e.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),l||(i.positions=s)),this.geometryBuffer=i.positions,Array.isArray(a))for(const t of a)this._rebuildGeometry(t);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:e}){this._rebuildGeometry({startRow:t,endRow:e})}normalizeGeometry(t){return t}updateGeometryAttributes(t,e,i){throw new Error("Not implemented")}getGeometrySize(t){throw new Error("Not implemented")}getGeometryFromBuffer(t){const e=t.value||t;return Object(o.a)(ArrayBuffer.isView(e)),Object(n.b)(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices})}_allocate(t,e){const{attributes:i,buffers:n,_attributeDefs:s,typedArrayManager:o}=this;for(const r in s)if(r in n)o.release(i[r]),i[r]=null;else{const n=s[r];n.copy=e,i[r]=o.allocate(i[r],t,n)}}_forEachGeometry(t,e,i){const{data:s,getGeometry:o}=this,{iterable:r,objectInfo:a}=Object(n.a)(s,e,i);for(const e of r){a.index++,t(o(e,a),a.index)}}_rebuildGeometry(t){if(!this.data||!this.getGeometry)return;let{indexStarts:e,vertexStarts:i,instanceCount:n}=this;const{data:s,geometryBuffer:o}=this,{startRow:a=0,endRow:l=1/0}=t||{},h={};if(t||(e=[0],i=[0]),this.normalize||!o)this._forEachGeometry((t,e)=>{t=this.normalizeGeometry(t),h[e]=t,i[e+1]=i[e]+this.getGeometrySize(t)},a,l),n=i[i.length-1];else if(o.buffer instanceof r.a){const t=o.stride||4*this.positionSize;i=s.startIndices,n=i[s.length]||o.buffer.byteLength/t}else{const t=o.value||o,e=o.stride/t.BYTES_PER_ELEMENT||this.positionSize;i=s.startIndices,n=i[s.length]||t.length/e}this._allocate(n,Boolean(t)),this.indexStarts=e,this.vertexStarts=i,this.instanceCount=n;const c={};this._forEachGeometry((t,s)=>{t=h[s]||t,c.vertexStart=i[s],c.indexStart=e[s];const o=s<i.length-1?i[s+1]:n;c.geometrySize=o-i[s],c.geometryIndex=s,this.updateGeometryAttributes(t,c)},a,l),this.vertexCount=e[e.length-1]}}},4834:function(t,e,i){"use strict";i.r(e),i.d(e,"getLayer",(function(){return I}));var n=i(0),s=i.n(n),o=i(2),r=i.n(o),a=i(4723),l=i(4653),h=i(4692),c=i(4718),p=i(4698),d=i(4693),u=i(4712);const g=[0,0,0,255],f={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:g},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class m extends a.a{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&l.a.removed("getLineDashArray","PathStyleExtension")()}updateState({oldProps:t,props:e,changeFlags:i}){const n=i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPolygon);if(n&&Array.isArray(i.dataChanged)){const t=this.state.paths.slice(),e=i.dataChanged.map(e=>Object(u.a)({data:t,getIndex:t=>t.__source.index,dataRange:e,replace:this._getPaths(e)}));this.setState({paths:t,pathsDiff:e})}else n&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(t={}){const{data:e,getPolygon:i,positionFormat:n,_normalize:s}=this.props,o=[],r="XY"===n?2:3,{startRow:a,endRow:l}=t,{iterable:c,objectInfo:p}=Object(h.a)(e,a,l);for(const t of c){p.index++;let e=i(t,p);s&&(e=d.b(e,r));const{holeIndices:n}=e,a=e.positions||e;if(n)for(let e=0;e<=n.length;e++){const i=a.slice(n[e-1]||0,n[e]||a.length);o.push(this.getSubLayerRow({path:i},t,p.index))}else o.push(this.getSubLayerRow({path:a},t,p.index))}return o}renderLayers(){const{data:t,_dataDiff:e,stroked:i,filled:n,extruded:s,wireframe:o,_normalize:r,_windingOrder:a,elevationScale:l,transitions:h,positionFormat:d}=this.props,{lineWidthUnits:u,lineWidthScale:f,lineWidthMinPixels:m,lineWidthMaxPixels:v,lineJointRounded:y,lineMiterLimit:_,lineDashJustified:b}=this.props,{getFillColor:x,getLineColor:C,getLineWidth:P,getLineDashArray:w,getElevation:L,getPolygon:E,updateTriggers:S,material:k}=this.props,{paths:A,pathsDiff:T}=this.state,M=this.getSubLayerClass("fill",c.a),z=this.getSubLayerClass("stroke",p.a),O=this.shouldRenderSubLayer("fill",A)&&new M({_dataDiff:e,extruded:s,elevationScale:l,filled:n,wireframe:o,_normalize:r,_windingOrder:a,getElevation:L,getFillColor:x,getLineColor:s&&o?C:g,material:k,transitions:h},this.getSubLayerProps({id:"fill",updateTriggers:{getPolygon:S.getPolygon,getElevation:S.getElevation,getFillColor:S.getFillColor,lineColors:s&&o,getLineColor:S.getLineColor}}),{data:t,positionFormat:d,getPolygon:E});return[!s&&O,!s&&i&&this.shouldRenderSubLayer("stroke",A)&&new z({_dataDiff:T&&(()=>T),widthUnits:u,widthScale:f,widthMinPixels:m,widthMaxPixels:v,jointRounded:y,miterLimit:_,dashJustified:b,_pathType:"loop",transitions:h&&{getWidth:h.getLineWidth,getColor:h.getLineColor,getPath:h.getPolygon},getColor:this.getSubLayerAccessor(C),getWidth:this.getSubLayerAccessor(P),getDashArray:this.getSubLayerAccessor(w)},this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:S.getLineWidth,getColor:S.getLineColor,getDashArray:S.getLineDashArray}}),{data:A,positionFormat:d,getPath:t=>t.path}),s&&O]}}m.layerName="PolygonLayer",m.defaultProps=f;var v=i(4648),y=i(4661),_=i(4651),b=i(167),x=i(4631),C=i(384),P=i(598),w=i(4665);function L(t,e,i){let{break_points:n,num_buckets:s}=t;if(!e)return[];if(void 0===n||0===n.length){const t=s?parseInt(s,10):10,[n,o]=Object(b.extent)(e,i);if(void 0===n)return[];const r=(o-n)/t,a=0===r?0:Math.max(0,Math.ceil(Math.log10(1/r))),l=o>o.toFixed(a)?1:0;return new Array(t+1+l).fill().map((t,e)=>(n+e*r).toFixed(a))}return n.sort((t,e)=>parseFloat(t)-parseFloat(e))}function E(t,e,i){let{break_points:n,num_buckets:s,linear_color_scheme:o,opacity:r}=t;const a=n||s?L({break_points:n,num_buckets:s},e,i):null,l=Array.isArray(o)?new C.a({colors:o,id:"custom"}):Object(P.a)().get(o);let h,c;if(null!==a){const t=a.length-1,e=t>1?l.getColors(t):[l.colors[l.colors.length-1]],i=e[0],n=e[e.length-1];e.unshift(i),e.push(n);const s=a.map(t=>parseFloat(t));h=Object(x.a)().domain(s).range(e),c=e=>e>a[t]||e<a[0]}else h=l.createLinearScale(Object(b.extent)(e,i)),c=()=>!1;return t=>{const e=i(t),n=Object(w.hexToRGB)(h(e));return c(e)?n[3]=0:n[3]=r/100*255,n}}var S=i(4650),k=i(4646),A=i(4643);function T(t){return"geometry"in t.polygon?t.polygon.geometry.coordinates[0]:t.polygon}var M=i(4640);function z(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function O(){return(O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function I(t,e,i,n,o,r,a){const l=t,h=l.fill_color_picker,c=l.stroke_color_picker;let p=[...e.data.features];if(null!=a&&a.forEach(t=>{p=p.filter(e=>t(e))}),l.js_data_mutator){const t=Object(A.a)(l.js_data_mutator);p=t(p)}const d=l.metric?l.metric.label||l.metric:null,u=null===l.metric?()=>[h.r,h.g,h.b,255*h.a]:E(l,p,t=>t[d]),g=t=>{const e=u(t);return o.length>0&&!o.includes(t[l.line_column])&&(e[3]/=2),e},f=l.line_column&&l.metric&&["json","geohash","zipcode"].includes(l.line_type)?function(t){return e=>{const i=t.metric.label||t.metric;return s.a.createElement("div",{className:"deckgl-tooltip"},e.object.name&&s.a.createElement(_.a,{label:"name: ",value:""+e.object.name}),e.object[t.line_column]&&s.a.createElement(_.a,{label:t.line_column+": ",value:""+e.object[t.line_column]}),t.metric&&s.a.createElement(_.a,{label:i+": ",value:""+e.object[i]}))}}(l):void 0;return new m(O({id:"path-layer-"+l.slice_id,data:p,pickable:!0,filled:l.filled,stroked:l.stroked,getPolygon:T,getFillColor:g,getLineColor:[c.r,c.g,c.b,255*c.a],getLineWidth:l.line_width,extruded:l.extruded,getElevation:t=>function(t,e){return 0===e(t)[3]?0:t.elevation}(t,g),elevationScale:l.multiplier,fp64:!0},Object(S.a)(l,n,f,r)))}const R={formData:r.a.object.isRequired,payload:r.a.object.isRequired,setControlValue:r.a.func.isRequired,viewport:r.a.object.isRequired,onAddFilter:r.a.func,width:r.a.number.isRequired,height:r.a.number.isRequired},D={onAddFilter(){}};class F extends s.a.Component{constructor(t){super(t),z(this,"containerRef",s.a.createRef()),z(this,"setTooltip",t=>{const{current:e}=this.containerRef;e&&e.setTooltip(t)}),this.state=F.getDerivedStateFromProps(t),this.getLayers=this.getLayers.bind(this),this.onSelect=this.onSelect.bind(this),this.onValuesChange=this.onValuesChange.bind(this)}static getDerivedStateFromProps(t,e){const{width:i,height:n,formData:s,payload:o}=t;if(e&&o.form_data===e.formData)return null;const r=o.data.features||[],a=r.map(t=>t.__timestamp),l=o.form_data.time_grain_sqla||o.form_data.granularity||"P1D",{start:h,end:c,getStep:p,values:d,disabled:u}=Object(k.a)(a,l);let{viewport:g}=t;return s.autozoom&&(g=Object(M.a)(g,{width:i,height:n,points:r.flatMap(T)})),{start:h,end:c,getStep:p,values:d,disabled:u,viewport:g,selected:[],lastClick:0,formData:o.form_data}}onSelect(t){const{formData:e,onAddFilter:i}=this.props,n=new Date,s=n-this.state.lastClick<=250,o=[...this.state.selected];if(s)o.splice(0,o.length,t);else if(e.toggle_polygons){const e=o.indexOf(t);-1===e?o.push(t):o.splice(e,1)}else o.splice(0,1,t);this.setState({selected:o,lastClick:n}),e.table_filter&&i(e.line_column,o,!1,!0)}onValuesChange(t){this.setState({values:Array.isArray(t)?t:[t,t+this.state.getStep(t)]})}getLayers(t){if(void 0===this.props.payload.data.features)return[];const e=[];return t[0]===t[1]||t[1]===this.end?e.push(e=>e.__timestamp>=t[0]&&e.__timestamp<=t[1]):e.push(e=>e.__timestamp>=t[0]&&e.__timestamp<t[1]),[I(this.props.formData,this.props.payload,this.props.onAddFilter,this.setTooltip,this.state.selected,this.onSelect,e)]}render(){const{payload:t,formData:e,setControlValue:i}=this.props,{start:n,end:o,getStep:r,values:a,disabled:l,viewport:h}=this.state,c=e,p=c.metric?c.metric.label||c.metric:null,d=function(t,e,i){const n=L(t,e,i),s=E(t,e,i),o={};return n.slice(1).forEach((e,i)=>{const r=n[i]+" - "+n[i+1],a=.5*(parseFloat(n[i])+parseFloat(n[i+1])),l=t.metric?t.metric.label||t.metric:null;o[r]={color:s({[l||t.metric]:a}),enabled:!0}}),o}(e,t.data.features,t=>t[p]);return s.a.createElement("div",{style:{position:"relative"}},s.a.createElement(v.a,{ref:this.containerRef,aggregation:!0,getLayers:this.getLayers,start:n,end:o,getStep:r,values:a,disabled:l,viewport:h,width:this.props.width,height:this.props.height,mapboxApiAccessToken:t.data.mapboxApiKey,mapStyle:e.mapbox_style,setControlValue:i,onValuesChange:this.onValuesChange,onViewportChange:this.onViewportChange},null!==e.metric&&s.a.createElement(y.a,{categories:d,position:e.legend_position,format:e.legend_format})))}}F.propTypes=R,F.defaultProps=D;e.default=F}}]);